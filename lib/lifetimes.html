
<!DOCTYPE html>
<html lang="bg">
<head>
    <title>Lifetimes</title>
    <meta charset="UTF-8">
    <meta name="keywords" content="rust,fmi">
    <link rel="stylesheet" href="resources/codeblock/codeblock.css">
<link rel="stylesheet" href="resources/frontend/controls.css">
<link rel="stylesheet" href="resources/global/global.css">
<link rel="stylesheet" href="resources/global/metadata.css">
<link rel="stylesheet" href="resources/highlight/hljs-github.css">
<link rel="stylesheet" href="resources/highlight/style.css">
<link rel="stylesheet" href="resources/highlight/tshl-github.css">
<link rel="stylesheet" href="resources/katex/katex.min.css">
<link rel="stylesheet" href="resources/rustc/rustc.css">
<link rel="stylesheet" href="resources/splitview/splitview.css">
<link rel="stylesheet" href="resources/wrapping-pages/wrapping-pages.css">
<script type="text/javascript" src="resources/codeblock/codeblock.js"></script>
<script type="text/javascript" src="resources/frontend/controls.js"></script>
</head>
<body>
    <main>
        <div class="slide">
<h1 id="lifetimes">Lifetimes</h1>
<h3 id="02-ноември-2021">02 ноември 2021</h3>
</div><div class="slide">
<h1 id="преговор">Преговор</h1>
</div><div class="slide subslide">
<h1 id="преговор">Преговор</h1>
<ul>
<li>конвертиране: <code>From</code>, <code>Into</code></li>
</ul>
</div><div class="slide subslide">
<h1 id="преговор">Преговор</h1>
<ul>
<li>конвертиране: <code>From</code>, <code>Into</code></li>
<li>парсене на низове: <code>FromStr</code>, <code>str::parse</code></li>
</ul>
</div><div class="slide subslide">
<h1 id="преговор">Преговор</h1>
<ul>
<li>конвертиране: <code>From</code>, <code>Into</code></li>
<li>парсене на низове: <code>FromStr</code>, <code>str::parse</code></li>
<li>error handling: <code>Option</code>, <code>Result</code></li>
</ul>
</div><div class="slide subslide">
<h1 id="преговор">Преговор</h1>
<ul>
<li>конвертиране: <code>From</code>, <code>Into</code></li>
<li>парсене на низове: <code>FromStr</code>, <code>str::parse</code></li>
<li>error handling: <code>Option</code>, <code>Result</code></li>
<li>error handling: <code>panic!</code></li>
</ul>
</div><div class="slide subslide">
<h1 id="преговор">Преговор</h1>
<ul>
<li>конвертиране: <code>From</code>, <code>Into</code></li>
<li>парсене на низове: <code>FromStr</code>, <code>str::parse</code></li>
<li>error handling: <code>Option</code>, <code>Result</code></li>
<li>error handling: <code>panic!</code></li>
<li>error handling: <code>try!</code>, оператор <code>?</code></li>
</ul>
</div><div class="slide">
<h1 id="lifetimes">Lifetimes</h1>
</div><div class="slide">
<h1 id="lifetimes">Lifetimes</h1>
<p>Ще говорим за интервала в който една стойност е жива</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="cafc334dea31f091ee312f9c872ae6fbe69b3fd0">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">main</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
{
    {
        <span class="tshl-keyword">let</span> x = <span class="tshl-constant_builtin">5</span><span class="tshl-punctuation_delimiter">;</span> <span class="tshl-comment">// --+</span>
                   <span class="tshl-comment">//   |</span>
    } <span class="tshl-comment">// &lt;--------------+</span>
}</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="cafc334dea31f091ee312f9c872ae6fbe69b3fd0">fn main()
{
    {
        let x = 5; // --+
                   //   |
    } // <--------------+
}</pre>
</div><div class="slide">
<h1 id="lifetime-на-променлива-със-собственост">Lifetime на променлива със собственост</h1>
<p>Стойността живее докато променливата е в scope</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="37a510ff4fc66aa3e0e89b1c0c41a056f7992234">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">main</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
{
    <span class="tshl-keyword">let</span> s = <span class="tshl-type">String</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">from</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;five&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span> <span class="tshl-comment">// --+</span>
                                  <span class="tshl-comment">//   |</span>
} <span class="tshl-comment">// &lt;---------------------------------+</span></code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="37a510ff4fc66aa3e0e89b1c0c41a056f7992234">fn main()
{
    let s = String::from("five"); // --+
                                  //   |
} // <---------------------------------+</pre>
</div><div class="slide">
<h1 id="lifetime-на-променлива-със-собственост">Lifetime на променлива със собственост</h1>
<p>Стойността живее докато променливата е в scope</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="9f20fd1209e10c183d22007919d0e002e5f67766">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">main</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
{
    <span class="tshl-keyword">let</span> s = <span class="tshl-type">String</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">from</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;five&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span> <span class="tshl-comment">// --+</span>
                                  <span class="tshl-comment">//   |</span>
                 <span class="tshl-comment">// v------------------+</span>
    <span class="tshl-function">takes_ownership</span><span class="tshl-punctuation_bracket">(</span>s<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
}

<span class="tshl-keyword">fn</span> <span class="tshl-function">takes_ownership</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">s</span>: <span class="tshl-type">String</span><span class="tshl-punctuation_bracket">)</span> {}</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="9f20fd1209e10c183d22007919d0e002e5f67766">fn main()
{
    let s = String::from("five"); // --+
                                  //   |
                 // v------------------+
    takes_ownership(s);
}

fn takes_ownership(s: String) {}</pre>
</div><div class="slide">
<h1 id="lifetime-на-референция">Lifetime на референция</h1>
<p>Референцията живее до мястото където е използвана за последно</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="7e8b719940c06ed6de0d916a23d1643e9af7cc73">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">main</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
{
    <span class="tshl-keyword">let</span> x = <span class="tshl-constant_builtin">5</span><span class="tshl-punctuation_delimiter">;</span>
    <span class="tshl-keyword">let</span> r = <span class="tshl-operator">&amp;</span>x<span class="tshl-punctuation_delimiter">;</span> <span class="tshl-comment">// ----+</span>
                <span class="tshl-comment">//     |</span>
                <span class="tshl-comment">// v---+</span>
    <span class="tshl-function_macro">println</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;{}&quot;</span>, r<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
}</code></pre>
                    </div>
                    <div class="rustc-container">
                    <pre><div class="rustc hljs">5</div></pre>
                </div>
                </div>
                
<pre class="rustc-source" data-sha="7e8b719940c06ed6de0d916a23d1643e9af7cc73">fn main()
{
    let x = 5;
    let r = &x; // ----+
                //     |
                // v---+
    println!("{}", r);
}</pre>
</div><div class="slide">
<h1 id="lifetime-на-референция">Lifetime на референция</h1>
<p>Референцията също така не може да надживее стойността, към която сочи</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="ee88aad37a6844f59b84d09400b622e2631370d3">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">main</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
{
    <span class="tshl-keyword">let</span> x = <span class="tshl-constant_builtin">5</span><span class="tshl-punctuation_delimiter">;</span>  <span class="tshl-comment">//--------+</span>
    <span class="tshl-keyword">let</span> r = <span class="tshl-operator">&amp;</span>x<span class="tshl-punctuation_delimiter">;</span> <span class="tshl-comment">// ----+  |</span>
                <span class="tshl-comment">//     |  |</span>
                <span class="tshl-comment">// v---+  |</span>
    <span class="tshl-function_macro">println</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;{}&quot;</span>, r<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span> <span class="tshl-comment">// |</span>
} <span class="tshl-comment">// &lt;--------------------+</span></code></pre>
                    </div>
                    <div class="rustc-container">
                    <pre><div class="rustc hljs">5</div></pre>
                </div>
                </div>
                
<pre class="rustc-source" data-sha="ee88aad37a6844f59b84d09400b622e2631370d3">fn main()
{
    let x = 5;  //--------+
    let r = &x; // ----+  |
                //     |  |
                // v---+  |
    println!("{}", r); // |
} // <--------------------+</pre>
</div><div class="slide">
<h1 id="lifetime-на-референция">Lifetime на референция</h1>
<p>Иначе borrow checker-а ще се скара</p>

                <div class="code-block">
                    
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">main</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
{
    <span class="tshl-keyword">let</span> r<span class="tshl-punctuation_delimiter">;</span>
    {
        <span class="tshl-keyword">let</span> x = <span class="tshl-constant_builtin">5</span><span class="tshl-punctuation_delimiter">;</span>  <span class="tshl-comment">//----+</span>
        r = <span class="tshl-operator">&amp;</span>x<span class="tshl-punctuation_delimiter">;</span> <span class="tshl-comment">// ----+  |</span>
                <span class="tshl-comment">//     |  |</span>
    } <span class="tshl-comment">// &lt;----------------+</span>
                <span class="tshl-comment">// v---+</span>
    <span class="tshl-function_macro">println</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;{}&quot;</span>, r<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
}</code></pre>
                    </div>
                    
                </div>
                
</div><div class="slide">
<h1 id="lifetime-на-референция">Lifetime на референция</h1>
<p>Иначе borrow checker-а ще се скара</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="fa10d38da86d8e94726f89cb8f0b106ec7b8be47">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">main</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
{
    <span class="tshl-keyword">let</span> r<span class="tshl-punctuation_delimiter">;</span>
    {
        <span class="tshl-keyword">let</span> x = <span class="tshl-constant_builtin">5</span><span class="tshl-punctuation_delimiter">;</span>  <span class="tshl-comment">//----+</span>
        r = <span class="tshl-operator">&amp;</span>x<span class="tshl-punctuation_delimiter">;</span> <span class="tshl-comment">// ----+  |</span>
                <span class="tshl-comment">//     |  |</span>
    } <span class="tshl-comment">// &lt;----------------+</span>
                <span class="tshl-comment">// v---+</span>
    <span class="tshl-function_macro">println</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;{}&quot;</span>, r<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
}</code></pre>
                    </div>
                    <div class="rustc-container">
                    <pre><div class="rustc hljs"><span style="font-weight:bold;color:rgb(255,85,85)">error[E0597]</span><span style="font-weight:bold">: `x` does not live long enough</span>
  <span style="font-weight:bold;color:rgb(85,85,255)">--&gt; </span>src/bin/main_fa10d38da86d8e94726f89cb8f0b106ec7b8be47.rs:6:13
   <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">6</span>  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>        r = &amp;x; // ----+  |
   <span style="font-weight:bold;color:rgb(85,85,255)">| </span>            <span style="font-weight:bold;color:rgb(255,85,85)">^^</span> <span style="font-weight:bold;color:rgb(255,85,85)">borrowed value does not live long enough</span>
<span style="font-weight:bold;color:rgb(85,85,255)">7</span>  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>                //     |  |
<span style="font-weight:bold;color:rgb(85,85,255)">8</span>  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>    } // &lt;----------------+
   <span style="font-weight:bold;color:rgb(85,85,255)">| </span>    <span style="font-weight:bold;color:rgb(85,85,255)">-</span> <span style="font-weight:bold;color:rgb(85,85,255)">`x` dropped here while still borrowed</span>
<span style="font-weight:bold;color:rgb(85,85,255)">9</span>  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>                // v---+
<span style="font-weight:bold;color:rgb(85,85,255)">10</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>    println!("{}", r);
   <span style="font-weight:bold;color:rgb(85,85,255)">| </span>                   <span style="font-weight:bold;color:rgb(85,85,255)">-</span> <span style="font-weight:bold;color:rgb(85,85,255)">borrow later used here</span>

<span style="font-weight:bold">For more information about this error, try `rustc --explain E0597`.</span>
<span style="font-weight:bold;color:rgb(255,85,85)">error</span><span style="font-weight:bold">:</span> could not compile `rust` due to previous error</div></pre>
                </div>
                </div>
                
<pre class="rustc-source" data-sha="fa10d38da86d8e94726f89cb8f0b106ec7b8be47">fn main()
{
    let r;
    {
        let x = 5;  //----+
        r = &x; // ----+  |
                //     |  |
    } // <----------------+
                // v---+
    println!("{}", r);
}</pre>
</div><div class="slide">
<h1 id="lifetimes">Lifetimes</h1>
<p>Нека пробваме с малко по-сложен пример…</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="41eae564842209a2fa219d2d1440f0681dfed024">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">main</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
{
    <span class="tshl-keyword">let</span> x = <span class="tshl-constant_builtin">5</span><span class="tshl-punctuation_delimiter">;</span>

    <span class="tshl-keyword">let</span> r2 = {
        <span class="tshl-keyword">let</span> r1 = <span class="tshl-operator">&amp;</span>x<span class="tshl-punctuation_delimiter">;</span>


        <span class="tshl-operator">&amp;</span><span class="tshl-operator">*</span>r1
    }<span class="tshl-punctuation_delimiter">;</span>

    <span class="tshl-function_macro">println</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;{}&quot;</span>, r2<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
}</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="41eae564842209a2fa219d2d1440f0681dfed024">fn main()
{
    let x = 5;

    let r2 = {
        let r1 = &x;


        &*r1
    };

    println!("{}", r2);
}</pre>
</div><div class="slide">
<h1 id="lifetimes">Lifetimes</h1>
<p>Нека пробваме с малко по-сложен пример… Работи</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="39085ba73495bfc286d2989761a74c0c535add4f">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">main</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
{
    <span class="tshl-keyword">let</span> x = <span class="tshl-constant_builtin">5</span><span class="tshl-punctuation_delimiter">;</span>

    <span class="tshl-keyword">let</span> r2 = {
        <span class="tshl-keyword">let</span> r1 = <span class="tshl-operator">&amp;</span>x<span class="tshl-punctuation_delimiter">;</span>


        <span class="tshl-operator">&amp;</span><span class="tshl-operator">*</span>r1
    }<span class="tshl-punctuation_delimiter">;</span>

    <span class="tshl-function_macro">println</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;{}&quot;</span>, r2<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
}</code></pre>
                    </div>
                    <div class="rustc-container">
                    <pre><div class="rustc hljs">5</div></pre>
                </div>
                </div>
                
<pre class="rustc-source" data-sha="39085ba73495bfc286d2989761a74c0c535add4f">fn main()
{
    let x = 5;

    let r2 = {
        let r1 = &x;


        &*r1
    };

    println!("{}", r2);
}</pre>
</div><div class="slide">
<h1 id="lifetimes">Lifetimes</h1>
<p>Можем да означим колко дълго живеят <code>x</code>, <code>r1</code> и <code>r2</code></p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="b22537fa7c5b3b71e6d27fc52105805d4e1a2414">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
</div>
                        <pre><code class="rustrust language-rust hljs">{
    <span class="tshl-keyword">let</span> x = <span class="tshl-constant_builtin">5</span><span class="tshl-punctuation_delimiter">;</span> <span class="tshl-comment">//-----------+</span>
               <span class="tshl-comment">//           |</span>
    <span class="tshl-keyword">let</span> r2 = { <span class="tshl-comment">//           |</span>
        <span class="tshl-keyword">let</span> r1 = <span class="tshl-operator">&amp;</span>x<span class="tshl-punctuation_delimiter">;</span> <span class="tshl-comment">// --+ |</span>
                     <span class="tshl-comment">//   | |</span>
        <span class="tshl-comment">// v--------------+ |</span>
        <span class="tshl-operator">&amp;</span><span class="tshl-operator">*</span>r1 <span class="tshl-comment">// --------+   |</span>
    }<span class="tshl-punctuation_delimiter">;</span>           <span class="tshl-comment">//     |   |</span>
                 <span class="tshl-comment">// v---+   |</span>
    <span class="tshl-function_macro">println</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;{}&quot;</span>, r2<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span> <span class="tshl-comment">//  |</span>
} <span class="tshl-comment">// &lt;----------------------+</span></code></pre>
                    </div>
                    <div class="rustc-container">
                    <pre><div class="rustc hljs">5</div></pre>
                </div>
                </div>
                
<pre class="rustc-source" data-sha="b22537fa7c5b3b71e6d27fc52105805d4e1a2414">fn main()
{
    let x = 5; //-----------+
               //           |
    let r2 = { //           |
        let r1 = &x; // --+ |
                     //   | |
        // v--------------+ |
        &*r1 // --------+   |
    };           //     |   |
                 // v---+   |
    println!("{}", r2); //  |
} // <----------------------+</pre>
</div><div class="slide subslide">
<h1 id="lifetimes">Lifetimes</h1>
<p>Можем да означим колко дълго живеят <code>x</code>, <code>r1</code> и <code>r2</code></p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="b22537fa7c5b3b71e6d27fc52105805d4e1a2414">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
</div>
                        <pre><code class="rustrust language-rust hljs">{
    <span class="tshl-keyword">let</span> x = <span class="tshl-constant_builtin">5</span><span class="tshl-punctuation_delimiter">;</span> <span class="tshl-comment">//-----------+</span>
               <span class="tshl-comment">//           |</span>
    <span class="tshl-keyword">let</span> r2 = { <span class="tshl-comment">//           |</span>
        <span class="tshl-keyword">let</span> r1 = <span class="tshl-operator">&amp;</span>x<span class="tshl-punctuation_delimiter">;</span> <span class="tshl-comment">// --+ |</span>
                     <span class="tshl-comment">//   | |</span>
        <span class="tshl-comment">// v--------------+ |</span>
        <span class="tshl-operator">&amp;</span><span class="tshl-operator">*</span>r1 <span class="tshl-comment">// --------+   |</span>
    }<span class="tshl-punctuation_delimiter">;</span>           <span class="tshl-comment">//     |   |</span>
                 <span class="tshl-comment">// v---+   |</span>
    <span class="tshl-function_macro">println</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;{}&quot;</span>, r2<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span> <span class="tshl-comment">//  |</span>
} <span class="tshl-comment">// &lt;----------------------+</span></code></pre>
                    </div>
                    <div class="rustc-container">
                    <pre><div class="rustc hljs">5</div></pre>
                </div>
                </div>
                
<pre class="rustc-source" data-sha="b22537fa7c5b3b71e6d27fc52105805d4e1a2414">fn main()
{
    let x = 5; //-----------+
               //           |
    let r2 = { //           |
        let r1 = &x; // --+ |
                     //   | |
        // v--------------+ |
        &*r1 // --------+   |
    };           //     |   |
                 // v---+   |
    println!("{}", r2); //  |
} // <----------------------+</pre>
<p><code>r2</code> е референция към стойността зад <code>x</code>. Важно е <code>r2</code> да не надживява <code>x</code></p>
</div><div class="slide">
<h1 id="lifetimes">Lifetimes</h1>
<ul>
<li>можем ли да счупим borrow checker-а?</li>
</ul>
</div><div class="slide subslide">
<h1 id="lifetimes">Lifetimes</h1>
<ul>
<li>можем ли да счупим borrow checker-а?</li>
<li>да пробваме да дефинираме следната функция</li>
</ul>

                <div class="code-block">
                    
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-comment">/// Връща по-дългия от двата низа</span>
<span class="tshl-keyword">fn</span> <span class="tshl-function">longer</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">s1</span>: <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span>, <span class="tshl-variable_parameter">s2</span>: <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span> {
    <span class="tshl-keyword">if</span> s1<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">len</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> &gt; s2<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">len</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> { s1 } <span class="tshl-keyword">else</span> { s2 }
}</code></pre>
                    </div>
                    
                </div>
                
</div><div class="slide">
<h1 id="lifetimes">Lifetimes</h1>
<p>Как би работило в следния случай?</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="641f9acb5b391471b0ca37c84a6361035ed41daf">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">let</span> s1 = <span class="tshl-type">String</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">from</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;looong&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
<span class="tshl-keyword">let</span> l = {
    <span class="tshl-keyword">let</span> s2 = <span class="tshl-type">String</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">from</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;123&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
    <span class="tshl-function">longer</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span>s1<span class="tshl-punctuation_bracket">[</span>..<span class="tshl-punctuation_bracket">]</span>, <span class="tshl-operator">&amp;</span>s2<span class="tshl-punctuation_bracket">[</span>..<span class="tshl-punctuation_bracket">]</span><span class="tshl-punctuation_bracket">)</span>
}<span class="tshl-punctuation_delimiter">;</span></code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="641f9acb5b391471b0ca37c84a6361035ed41daf">fn longer(_: &str, _: &str) {}
fn main() {
let s1 = String::from("looong");
let l = {
    let s2 = String::from("123");
    longer(&s1[..], &s2[..])
};
}</pre>
</div><div class="slide">
<h1 id="lifetimes">Lifetimes</h1>
<p>Как би работило в следния случай?</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="d094a572e34bf26641ee8b0ca9fb4604d1595ab6">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">let</span> s1 = { <span class="tshl-keyword">let</span> <span class="tshl-keyword">mut</span> s = <span class="tshl-type">String</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span> std<span class="tshl-punctuation_delimiter">::</span>io<span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">stdin</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">read_line</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span><span class="tshl-keyword">mut</span> s<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span> s }<span class="tshl-punctuation_delimiter">;</span>
<span class="tshl-keyword">let</span> l = {
    <span class="tshl-keyword">let</span> s2 = { <span class="tshl-keyword">let</span> <span class="tshl-keyword">mut</span> s = <span class="tshl-type">String</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span> std<span class="tshl-punctuation_delimiter">::</span>io<span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">stdin</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">read_line</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span><span class="tshl-keyword">mut</span> s<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span> s }<span class="tshl-punctuation_delimiter">;</span>
    <span class="tshl-function">longer</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span>s1<span class="tshl-punctuation_bracket">[</span>..<span class="tshl-punctuation_bracket">]</span>, <span class="tshl-operator">&amp;</span>s2<span class="tshl-punctuation_bracket">[</span>..<span class="tshl-punctuation_bracket">]</span><span class="tshl-punctuation_bracket">)</span>
}<span class="tshl-punctuation_delimiter">;</span></code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="d094a572e34bf26641ee8b0ca9fb4604d1595ab6">#![allow(unused_must_use)]
fn longer(_: &str, _: &str) {}
fn main() {
let s1 = { let mut s = String::new(); std::io::stdin().read_line(&mut s); s };
let l = {
    let s2 = { let mut s = String::new(); std::io::stdin().read_line(&mut s); s };
    longer(&s1[..], &s2[..])
};
}</pre>
</div><div class="slide">
<h1 id="lifetimes">Lifetimes</h1>
<ul>
<li>не може валидността на функцията да зависи от това какви аргументи ѝ подаваме</li>
</ul>
</div><div class="slide subslide">
<h1 id="lifetimes">Lifetimes</h1>
<ul>
<li>не може валидността на функцията да зависи от това какви аргументи ѝ подаваме</li>
<li>и действително тази функция не се компилира</li>
</ul>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="33b4ac338e5075f0ff9097f3f20bad54061384df">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-comment">/// Връща по-дългия от двата низа</span>
<span class="tshl-keyword">fn</span> <span class="tshl-function">longer</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">s1</span>: <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span>, <span class="tshl-variable_parameter">s2</span>: <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span> {
    <span class="tshl-keyword">if</span> s1<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">len</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> &gt; s2<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">len</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> { s1 } <span class="tshl-keyword">else</span> { s2 }
}</code></pre>
                    </div>
                    <div class="rustc-container">
                    <pre><div class="rustc hljs"><span style="font-weight:bold;color:rgb(255,85,85)">error[E0106]</span><span style="font-weight:bold">: missing lifetime specifier</span>
 <span style="font-weight:bold;color:rgb(85,85,255)">--&gt; </span>src/bin/main_33b4ac338e5075f0ff9097f3f20bad54061384df.rs:4:34
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">4</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>fn longer(s1: &amp;str, s2: &amp;str) -&gt; &amp;str {
  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>              <span style="font-weight:bold;color:rgb(85,85,255)">----</span>      <span style="font-weight:bold;color:rgb(85,85,255)">----</span>     <span style="font-weight:bold;color:rgb(255,85,85)">^</span> <span style="font-weight:bold;color:rgb(255,85,85)">expected named lifetime parameter</span>
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
  <span style="font-weight:bold;color:rgb(85,85,255)">= </span><span style="font-weight:bold">help</span>: this function's return type contains a borrowed value, but the signature does not say whether it is borrowed from `s1` or `s2`
<span style="font-weight:bold;color:rgb(85,187,187)">help</span>: consider introducing a named lifetime parameter
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">4</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>fn longer<span style="color:rgb(85,187,85)">&lt;'a&gt;</span>(s1: &amp;<span style="color:rgb(85,187,85)">'a </span>str, s2: &amp;<span style="color:rgb(85,187,85)">'a </span>str) -&gt; &amp;<span style="color:rgb(85,187,85)">'a </span>str {
  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>         <span style="color:rgb(85,187,85)">++++</span>      <span style="color:rgb(85,187,85)">++</span>           <span style="color:rgb(85,187,85)">++</span>          <span style="color:rgb(85,187,85)">++</span>

<span style="font-weight:bold">For more information about this error, try `rustc --explain E0106`.</span>
<span style="font-weight:bold;color:rgb(255,85,85)">error</span><span style="font-weight:bold">:</span> could not compile `rust` due to previous error</div></pre>
                </div>
                </div>
                
<pre class="rustc-source" data-sha="33b4ac338e5075f0ff9097f3f20bad54061384df">fn main() {}
/// Връща по-дългия от двата низа
fn longer(s1: &str, s2: &str) -> &str {
    if s1.len() > s2.len() { s1 } else { s2 }
}</pre>
</div><div class="slide">
<h1 id="lifetime-анотации">Lifetime анотации</h1>
</div><div class="slide">
<h1 id="lifetime-анотации">Lifetime анотации</h1>
<p>Какъв е проблема?</p>
</div><div class="slide subslide">
<h1 id="lifetime-анотации">Lifetime анотации</h1>
<p>Какъв е проблема?</p>
<ul>
<li>искаме да поддържаме функции като <code>longer</code></li>
</ul>
</div><div class="slide subslide">
<h1 id="lifetime-анотации">Lifetime анотации</h1>
<p>Какъв е проблема?</p>
<ul>
<li>искаме да поддържаме функции като <code>longer</code></li>
<li>функции които връщат референции</li>
</ul>
</div><div class="slide subslide">
<h1 id="lifetime-анотации">Lifetime анотации</h1>
<p>Какъв е проблема?</p>
<ul>
<li>искаме да поддържаме функции като <code>longer</code></li>
<li>функции които връщат референции</li>
<li><code>fn function(...) -&gt; &amp;X</code></li>
</ul>
</div><div class="slide subslide">
<h1 id="lifetime-анотации">Lifetime анотации</h1>
<p>Какъв е проблема?</p>
<ul>
<li>искаме да поддържаме функции като <code>longer</code></li>
<li>функции които връщат референции</li>
<li><code>fn function(...) -&gt; &amp;X</code></li>
<li>следователно ни трябва начин да означим колко дълго живее върнатата референция</li>
</ul>
</div><div class="slide">
<h1 id="lifetime-анотации">Lifetime анотации</h1>
<p>Грешката ни казва, че трябва да означим дали върнатият резултат живее колкото параметъра <code>s1</code> или колкото параметъра <code>s2</code></p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="33b4ac338e5075f0ff9097f3f20bad54061384df">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-comment">/// Връща по-дългия от двата низа</span>
<span class="tshl-keyword">fn</span> <span class="tshl-function">longer</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">s1</span>: <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span>, <span class="tshl-variable_parameter">s2</span>: <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span> {
    <span class="tshl-keyword">if</span> s1<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">len</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> &gt; s2<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">len</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> { s1 } <span class="tshl-keyword">else</span> { s2 }
}</code></pre>
                    </div>
                    <div class="rustc-container">
                    <pre><div class="rustc hljs"><span style="font-weight:bold;color:rgb(255,85,85)">error[E0106]</span><span style="font-weight:bold">: missing lifetime specifier</span>
 <span style="font-weight:bold;color:rgb(85,85,255)">--&gt; </span>src/bin/main_33b4ac338e5075f0ff9097f3f20bad54061384df.rs:4:34
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">4</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>fn longer(s1: &amp;str, s2: &amp;str) -&gt; &amp;str {
  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>              <span style="font-weight:bold;color:rgb(85,85,255)">----</span>      <span style="font-weight:bold;color:rgb(85,85,255)">----</span>     <span style="font-weight:bold;color:rgb(255,85,85)">^</span> <span style="font-weight:bold;color:rgb(255,85,85)">expected named lifetime parameter</span>
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
  <span style="font-weight:bold;color:rgb(85,85,255)">= </span><span style="font-weight:bold">help</span>: this function's return type contains a borrowed value, but the signature does not say whether it is borrowed from `s1` or `s2`
<span style="font-weight:bold;color:rgb(85,187,187)">help</span>: consider introducing a named lifetime parameter
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">4</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>fn longer<span style="color:rgb(85,187,85)">&lt;'a&gt;</span>(s1: &amp;<span style="color:rgb(85,187,85)">'a </span>str, s2: &amp;<span style="color:rgb(85,187,85)">'a </span>str) -&gt; &amp;<span style="color:rgb(85,187,85)">'a </span>str {
  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>         <span style="color:rgb(85,187,85)">++++</span>      <span style="color:rgb(85,187,85)">++</span>           <span style="color:rgb(85,187,85)">++</span>          <span style="color:rgb(85,187,85)">++</span>

<span style="font-weight:bold">For more information about this error, try `rustc --explain E0106`.</span>
<span style="font-weight:bold;color:rgb(255,85,85)">error</span><span style="font-weight:bold">:</span> could not compile `rust` due to previous error</div></pre>
                </div>
                </div>
                
<pre class="rustc-source" data-sha="33b4ac338e5075f0ff9097f3f20bad54061384df">fn main() {}
/// Връща по-дългия от двата низа
fn longer(s1: &str, s2: &str) -> &str {
    if s1.len() > s2.len() { s1 } else { s2 }
}</pre>
</div><div class="slide">
<h1 id="lifetime-анотации">Lifetime анотации</h1>
<p>Отговорът: и трите живеят еднакво дълго</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="cf932a4ca8275f433375f53ccb29687ba47826fe">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-comment">/// Връща по-дългия от двата низа</span>
<span class="tshl-keyword">fn</span> <span class="tshl-function">longer</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">s1</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span>, <span class="tshl-variable_parameter">s2</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span> {
    <span class="tshl-keyword">if</span> s1<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">len</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> &gt; s2<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">len</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> { s1 } <span class="tshl-keyword">else</span> { s2 }
}</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="cf932a4ca8275f433375f53ccb29687ba47826fe">fn main() {}
/// Връща по-дългия от двата низа
fn longer<'a>(s1: &'a str, s2: &'a str) -> &'a str {
    if s1.len() > s2.len() { s1 } else { s2 }
}</pre>
</div><div class="slide">
<h1 id="a">'a</h1>
</div><div class="slide subslide">
<h1 id="a">'a</h1>
<ul>
<li><code>'а</code> се нарича lifetime параметър или lifetime анотация</li>
</ul>
</div><div class="slide subslide">
<h1 id="a">'a</h1>
<ul>
<li><code>'а</code> се нарича lifetime параметър или lifetime анотация</li>
<li>специален вид generic параметър</li>
</ul>
</div><div class="slide subslide">
<h1 id="a">'a</h1>
<ul>
<li><code>'а</code> се нарича lifetime параметър или lifetime анотация</li>
<li>специален вид generic параметър</li>
<li>използва се да се означи колко дълго живее референция</li>
</ul>
</div><div class="slide subslide">
<h1 id="a">'a</h1>
<ul>
<li><code>'а</code> се нарича lifetime параметър или lifetime анотация</li>
<li>специален вид generic параметър</li>
<li>използва се да се означи колко дълго живее референция</li>
<li><code>&amp;'a X</code>, <code>&amp;'b mut Y</code></li>
</ul>
</div><div class="slide subslide">
<h1 id="a">'a</h1>
<ul>
<li><code>'а</code> се нарича lifetime параметър или lifetime анотация</li>
<li>специален вид generic параметър</li>
<li>използва се да се означи колко дълго живее референция</li>
<li><code>&amp;'a X</code>, <code>&amp;'b mut Y</code></li>
<li>може да е всякакъв идентификатор, но практиката е да са кратки или еднобуквени</li>
</ul>
</div><div class="slide subslide">
<h1 id="a">'a</h1>
<ul>
<li><code>'а</code> се нарича lifetime параметър или lifetime анотация</li>
<li>специален вид generic параметър</li>
<li>използва се да се означи колко дълго живее референция</li>
<li><code>&amp;'a X</code>, <code>&amp;'b mut Y</code></li>
<li>може да е всякакъв идентификатор, но практиката е да са кратки или еднобуквени</li>
<li><code>&amp;'my_lifetime X</code></li>
</ul>
</div><div class="slide">
<h1 id="a">'a</h1>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="e1ce5e9614f9ba2bd66b70e2bbbb4a610b161444">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">foo</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">x</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> { }</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="e1ce5e9614f9ba2bd66b70e2bbbb4a610b161444">fn foo<'a>(x: &'a str) { }
fn main() {}</pre>
<ul>
<li>отделно <code>x: &amp;'a str</code> не ни дава информация</li>
</ul>
</div><div class="slide subslide">
<h1 id="a">'a</h1>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="e1ce5e9614f9ba2bd66b70e2bbbb4a610b161444">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">foo</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">x</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> { }</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="e1ce5e9614f9ba2bd66b70e2bbbb4a610b161444">fn foo<'a>(x: &'a str) { }
fn main() {}</pre>
<ul>
<li>отделно <code>x: &amp;'a str</code> не ни дава информация</li>
<li>измислили сме си име <code>a</code> за периода за който живее референцията <code>x</code></li>
</ul>
</div><div class="slide">
<h1 id="a">'a</h1>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="081ff8091d4f8188d637193daff22ad4b26ed32f">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">foo</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">x</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span>, <span class="tshl-variable_parameter">y</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> { }</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="081ff8091d4f8188d637193daff22ad4b26ed32f">fn foo<'a>(x: &'a str, y: &'a str) { }
fn main() {}</pre>
<ul>
<li>заедно <code>x: &amp;'a str</code> и <code>y: &amp;'a str</code> задават ограничение</li>
</ul>
</div><div class="slide subslide">
<h1 id="a">'a</h1>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="081ff8091d4f8188d637193daff22ad4b26ed32f">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">foo</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">x</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span>, <span class="tshl-variable_parameter">y</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> { }</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="081ff8091d4f8188d637193daff22ad4b26ed32f">fn foo<'a>(x: &'a str, y: &'a str) { }
fn main() {}</pre>
<ul>
<li>заедно <code>x: &amp;'a str</code> и <code>y: &amp;'a str</code> задават ограничение</li>
<li><code>x</code> живее колкото <code>y</code></li>
</ul>
</div><div class="slide subslide">
<h1 id="a">'a</h1>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="081ff8091d4f8188d637193daff22ad4b26ed32f">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">foo</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">x</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span>, <span class="tshl-variable_parameter">y</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> { }</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="081ff8091d4f8188d637193daff22ad4b26ed32f">fn foo<'a>(x: &'a str, y: &'a str) { }
fn main() {}</pre>
<ul>
<li>заедно <code>x: &amp;'a str</code> и <code>y: &amp;'a str</code> задават ограничение</li>
<li><code>x</code> живее колкото <code>y</code></li>
<li>(в случая отново не получаваме много информация, защото и двете са аргументи)</li>
</ul>
</div><div class="slide">
<h1 id="lifetimes---примери">Lifetimes - примери</h1>
<p>Функцията <code>trim</code> връща резултат който живее колкото аргумента</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="9227951d1e928db5662e50ff48fda107a756929c">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">trim</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">s</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_delimiter"></span>

<span class="tshl-keyword">fn</span> <span class="tshl-function">main</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> {
    {
        <span class="tshl-keyword">let</span> s = <span class="tshl-type">String</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">from</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;  низ  <span class="tshl-escape">\n</span>&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span> <span class="tshl-comment">// --+</span>
        <span class="tshl-keyword">let</span> trimmed = <span class="tshl-function">trim</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span>s<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>            <span class="tshl-comment">// --|-+</span>
                                           <span class="tshl-comment">//   | |</span>
    } <span class="tshl-comment">// &lt;--------------------------------------+-+</span>
}</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="9227951d1e928db5662e50ff48fda107a756929c">fn trim<'a>(s: &'a str) -> &'a str
{ s.trim() }

fn main() {
    {
        let s = String::from("  низ  \n"); // --+
        let trimmed = trim(&s);            // --|-+
                                           //   | |
    } // <--------------------------------------+-+
}</pre>
</div><div class="slide">
<h1 id="lifetimes---примери">Lifetimes - примери</h1>
<p>Функцията <code>longer</code> връща резултат който живее колкото общия период в който живеят двата ѝ аргумента.</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="3b369745f71623832e91af9a0d62d6fec3e4eed6">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">longer</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">s1</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span>, <span class="tshl-variable_parameter">s2</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_delimiter"></span>

<span class="tshl-keyword">fn</span> <span class="tshl-function">main</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> {
    <span class="tshl-keyword">let</span> s1 = <span class="tshl-type">String</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">from</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;дългият низ е дълъг&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
    {
        <span class="tshl-keyword">let</span> s2 = <span class="tshl-type">String</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">from</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;къс низ&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
        <span class="tshl-keyword">let</span> result = <span class="tshl-function">longer</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span>s1, <span class="tshl-operator">&amp;</span>s2<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
    }
}</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="3b369745f71623832e91af9a0d62d6fec3e4eed6">fn longer<'a>(s1: &'a str, s2: &'a str) -> &'a str
{ unimplemented!() }

fn main() {
    let s1 = String::from("дългият низ е дълъг");
    {
        let s2 = String::from("къс низ");
        let result = longer(&s1, &s2);
    }
}</pre>
</div><div class="slide">
<h1 id="lifetimes---примери">Lifetimes - примери</h1>
<p>Ако двата аргумента живеят различно - ще се вземе по-малкия период</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="60c7d880174be3e6bd82d21f4844bb528cb6f5e5">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">longer</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">s1</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span>, <span class="tshl-variable_parameter">s2</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_delimiter"></span>

<span class="tshl-keyword">fn</span> <span class="tshl-function">main</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> {
    <span class="tshl-keyword">let</span> s1 = <span class="tshl-type">String</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">from</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;дългият низ е дълъг&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span> <span class="tshl-comment">// --+</span>
    {                                             <span class="tshl-comment">//   |</span>
        <span class="tshl-keyword">let</span> s2 = <span class="tshl-type">String</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">from</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;къс низ&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span> <span class="tshl-comment">// --+       |</span>
        <span class="tshl-keyword">let</span> result = <span class="tshl-function">longer</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span>s1, <span class="tshl-operator">&amp;</span>s2<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>    <span class="tshl-comment">// --|--+    |</span>
                                          <span class="tshl-comment">//   |  |    |</span>
    } <span class="tshl-comment">// &lt;-------------------------------------+--+    |</span>
} <span class="tshl-comment">// &lt;-------------------------------------------------+</span></code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="60c7d880174be3e6bd82d21f4844bb528cb6f5e5">fn longer<'a>(s1: &'a str, s2: &'a str) -> &'a str
{ unimplemented!() }

fn main() {
    let s1 = String::from("дългият низ е дълъг"); // --+
    {                                             //   |
        let s2 = String::from("къс низ"); // --+       |
        let result = longer(&s1, &s2);    // --|--+    |
                                          //   |  |    |
    } // <-------------------------------------+--+    |
} // <-------------------------------------------------+</pre>
</div><div class="slide subslide">
<h1 id="lifetimes---примери">Lifetimes - примери</h1>
<p>Ако двата аргумента живеят различно - ще се вземе по-малкия период</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="60c7d880174be3e6bd82d21f4844bb528cb6f5e5">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">longer</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">s1</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span>, <span class="tshl-variable_parameter">s2</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_delimiter"></span>

<span class="tshl-keyword">fn</span> <span class="tshl-function">main</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> {
    <span class="tshl-keyword">let</span> s1 = <span class="tshl-type">String</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">from</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;дългият низ е дълъг&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span> <span class="tshl-comment">// --+</span>
    {                                             <span class="tshl-comment">//   |</span>
        <span class="tshl-keyword">let</span> s2 = <span class="tshl-type">String</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">from</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;къс низ&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span> <span class="tshl-comment">// --+       |</span>
        <span class="tshl-keyword">let</span> result = <span class="tshl-function">longer</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span>s1, <span class="tshl-operator">&amp;</span>s2<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>    <span class="tshl-comment">// --|--+    |</span>
                                          <span class="tshl-comment">//   |  |    |</span>
    } <span class="tshl-comment">// &lt;-------------------------------------+--+    |</span>
} <span class="tshl-comment">// &lt;-------------------------------------------------+</span></code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="60c7d880174be3e6bd82d21f4844bb528cb6f5e5">fn longer<'a>(s1: &'a str, s2: &'a str) -> &'a str
{ unimplemented!() }

fn main() {
    let s1 = String::from("дългият низ е дълъг"); // --+
    {                                             //   |
        let s2 = String::from("къс низ"); // --+       |
        let result = longer(&s1, &s2);    // --|--+    |
                                          //   |  |    |
    } // <-------------------------------------+--+    |
} // <-------------------------------------------------+</pre>
<ul>
<li>има автоматично конвертиране от по-голям до по-малък lifetime</li>
</ul>
</div><div class="slide">
<h1 id="lifetimes---примери">Lifetimes - примери</h1>
<p>Не е нужно всички lifetime-и да са еднакви</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="19b1a6c97816ad9d81a8e0884f0f4233e4a89bcc">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">first_occurrence</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span>, <span class="tshl-operator">&#39;</span><span class="tshl-label">b</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">s</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span>, <span class="tshl-variable_parameter">pattern</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">b</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Option</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">&gt;</span> {
    s<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">matches</span><span class="tshl-punctuation_bracket">(</span>pattern<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">next</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
}

<span class="tshl-keyword">fn</span> <span class="tshl-function">main</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> {
    <span class="tshl-keyword">let</span> text = <span class="tshl-type">String</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">from</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;обичам мач и боза&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
    <span class="tshl-keyword">let</span> result = {
        <span class="tshl-keyword">let</span> pattern = <span class="tshl-type">String</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">from</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;боза&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
        <span class="tshl-function">first_occurrence</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span>text, <span class="tshl-operator">&amp;</span>pattern<span class="tshl-punctuation_bracket">)</span>
    }<span class="tshl-punctuation_delimiter">;</span>

    <span class="tshl-function_macro">println</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;{:?}&quot;</span>, result<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
}</code></pre>
                    </div>
                    <div class="rustc-container">
                    <pre><div class="rustc hljs">Some("боза")</div></pre>
                </div>
                </div>
                
<pre class="rustc-source" data-sha="19b1a6c97816ad9d81a8e0884f0f4233e4a89bcc">fn first_occurrence<'a, 'b>(s: &'a str, pattern: &'b str) -> Option<&'a str> {
    s.matches(pattern).next()
}

fn main() {
    let text = String::from("обичам мач и боза");
    let result = {
        let pattern = String::from("боза");
        first_occurrence(&text, &pattern)
    };

    println!("{:?}", result);
}</pre>
</div><div class="slide">
<h1 id="lifetime-elision">Lifetime elision</h1>
</div><div class="slide subslide">
<h1 id="lifetime-elision">Lifetime elision</h1>
<ul>
<li>всяка референция има lifetime параметър</li>
</ul>
</div><div class="slide subslide">
<h1 id="lifetime-elision">Lifetime elision</h1>
<ul>
<li>всяка референция има lifetime параметър</li>
<li>но не е задължително винаги да ги пишем</li>
</ul>
</div><div class="slide subslide">
<h1 id="lifetime-elision">Lifetime elision</h1>
<ul>
<li>всяка референция има lifetime параметър</li>
<li>но не е задължително винаги да ги пишем</li>
<li>когато ситуацията не е двусмислена може да се пропуснат</li>
</ul>
</div><div class="slide subslide">
<h1 id="lifetime-elision">Lifetime elision</h1>
<ul>
<li>всяка референция има lifetime параметър</li>
<li>но не е задължително винаги да ги пишем</li>
<li>когато ситуацията не е двусмислена може да се пропуснат</li>
<li>това се нарича lifetime elision</li>
</ul>
</div><div class="slide">
<h1 id="lifetime-elision">Lifetime elision</h1>
<p>Следните дефиниции са еквивалентни:</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="cff33e325d478e54abefee04e90ba9dee87d952b">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">trim</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">s</span>: <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span> {
    <span class="tshl-comment">// ...</span>
}</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="cff33e325d478e54abefee04e90ba9dee87d952b">fn trim(s: &str) -> &str {
    // ...
unimplemented!()
}
fn main() {}</pre>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="f6840e642cebe0da80073f91c8637f836b94b5d5">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">trim</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">s</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span> {
    <span class="tshl-comment">// ...</span>
}</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="f6840e642cebe0da80073f91c8637f836b94b5d5">fn trim<'a>(s: &'a str) -> &'a str {
    // ...
unimplemented!()
}
fn main() {}</pre>
</div><div class="slide">
<h1 id="lifetime-elision">Lifetime elision</h1>
<h3 id="кога-трябва-да-пишем-lifetimes">Кога трябва да пишем lifetimes?</h3>
</div><div class="slide subslide">
<h1 id="lifetime-elision">Lifetime elision</h1>
<h3 id="кога-трябва-да-пишем-lifetimes">Кога трябва да пишем lifetimes?</h3>
<ul>
<li>блок код<ul>
<li>никога</li>
<li>компилаторът винаги има всичката нужна информация да определи правилния lifetime</li></ul></li>
</ul>
</div><div class="slide subslide">
<h1 id="lifetime-elision">Lifetime elision</h1>
<h3 id="кога-трябва-да-пишем-lifetimes">Кога трябва да пишем lifetimes?</h3>
<ul>
<li>блок код<ul>
<li>никога</li>
<li>компилаторът винаги има всичката нужна информация да определи правилния lifetime<br />
<br/></li></ul></li>
<li>дефиниция на функция<ul>
<li>понякога</li>
<li>тук се прилага lifetime elision</li></ul></li>
</ul>
</div><div class="slide subslide">
<h1 id="lifetime-elision">Lifetime elision</h1>
<h3 id="кога-трябва-да-пишем-lifetimes">Кога трябва да пишем lifetimes?</h3>
<ul>
<li>блок код<ul>
<li>никога</li>
<li>компилаторът винаги има всичката нужна информация да определи правилния lifetime<br />
<br/></li></ul></li>
<li>дефиниция на функция<ul>
<li>понякога</li>
<li>тук се прилага lifetime elision<br />
<br/></li></ul></li>
<li>структура<ul>
<li>винаги</li></ul></li>
</ul>
</div><div class="slide">
<h1 id="lifetime-elision">Lifetime elision</h1>
<h3 id="как-работи">Как работи</h3>
<p>За всеки пропуснат lifetime в аргументите се добавя нов lifetime параметър</p>

                <div class="code-block">
                    
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">print</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">s</span>: <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>                                  <span class="tshl-comment">// elided</span>
<span class="tshl-keyword">fn</span> <span class="tshl-function">print</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">s</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>                           <span class="tshl-comment">// expanded</span>

<span class="tshl-keyword">fn</span> <span class="tshl-function">foo</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">x</span>: <span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">u32</span>, <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">u32</span><span class="tshl-punctuation_bracket">)</span>, <span class="tshl-variable_parameter">y</span>: <span class="tshl-type_builtin">usize</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>                  <span class="tshl-comment">// elided</span>
<span class="tshl-keyword">fn</span> <span class="tshl-function">foo</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span>, <span class="tshl-operator">&#39;</span><span class="tshl-label">b</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">x</span>: <span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">u32</span>, <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">b</span> <span class="tshl-type_builtin">u32</span><span class="tshl-punctuation_bracket">)</span>, <span class="tshl-variable_parameter">y</span>: <span class="tshl-type_builtin">usize</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>    <span class="tshl-comment">// expanded</span></code></pre>
                    </div>
                    
                </div>
                
</div><div class="slide">
<h1 id="lifetime-elision">Lifetime elision</h1>
<h3 id="как-работи">Как работи</h3>
<p>(1) Ако за <em>аргументите</em> има само един lifetime параметър (експлицитен или пропуснат), този lifetime се налага на всички пропуснати lifetimes в <em>резултата</em></p>

                <div class="code-block">
                    
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">substr</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">s</span>: <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span>, <span class="tshl-variable_parameter">until</span>: <span class="tshl-type_builtin">usize</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_delimiter">;</span>                         <span class="tshl-comment">// elided</span>
<span class="tshl-keyword">fn</span> <span class="tshl-function">substr</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">s</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span>, <span class="tshl-variable_parameter">until</span>: <span class="tshl-type_builtin">usize</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_delimiter">;</span>               <span class="tshl-comment">// expanded</span>

<span class="tshl-keyword">fn</span> <span class="tshl-function">split_at</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">s</span>: <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span>, <span class="tshl-variable_parameter">pos</span>: <span class="tshl-type_builtin">usize</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span>, <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>                 <span class="tshl-comment">// elided</span>
<span class="tshl-keyword">fn</span> <span class="tshl-function">split_at</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">s</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span>, <span class="tshl-variable_parameter">pos</span>: <span class="tshl-type_builtin">usize</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span>, <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>    <span class="tshl-comment">// expanded</span></code></pre>
                    </div>
                    
                </div>
                
</div><div class="slide">
<h1 id="lifetime-elision">Lifetime elision</h1>
<h3 id="как-работи">Как работи</h3>
<p>(2) Ако първият аргумент е <code>&amp;self</code> или <code>&amp;mut self</code>, неговия lifetime се налага на всички пропуснати lifetimes в резултата</p>

                <div class="code-block">
                    
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">get_mut</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span><span class="tshl-keyword">mut</span> <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-operator">&amp;</span><span class="tshl-keyword">mut</span> <span class="tshl-type">T</span><span class="tshl-punctuation_delimiter">;</span>                                <span class="tshl-comment">// elided</span>
<span class="tshl-keyword">fn</span> <span class="tshl-function">get_mut</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-keyword">mut</span> <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-keyword">mut</span> <span class="tshl-type">T</span><span class="tshl-punctuation_delimiter">;</span>                      <span class="tshl-comment">// expanded</span>

<span class="tshl-keyword">fn</span> <span class="tshl-function">args</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span><span class="tshl-keyword">mut</span> <span class="tshl-variable_builtin">self</span>, <span class="tshl-variable_parameter">args</span>: <span class="tshl-operator">&amp;</span><span class="tshl-punctuation_bracket">[</span><span class="tshl-type">T</span><span class="tshl-punctuation_bracket">]</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-operator">&amp;</span><span class="tshl-keyword">mut</span> <span class="tshl-type">Self</span><span class="tshl-punctuation_delimiter">;</span>                    <span class="tshl-comment">// elided</span>
<span class="tshl-keyword">fn</span> <span class="tshl-function">args</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span>, <span class="tshl-operator">&#39;</span><span class="tshl-label">b</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-keyword">mut</span> <span class="tshl-variable_builtin">self</span>, <span class="tshl-variable_parameter">args</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">b</span> <span class="tshl-punctuation_bracket">[</span><span class="tshl-type">T</span><span class="tshl-punctuation_bracket">]</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-keyword">mut</span> <span class="tshl-type">Self</span><span class="tshl-punctuation_delimiter">;</span>   <span class="tshl-comment">// expanded</span></code></pre>
                    </div>
                    
                </div>
                
</div><div class="slide">
<h1 id="lifetime-elision">Lifetime elision</h1>
<h3 id="как-работи">Как работи</h3>
<p>(3) Във всички останали случаи е грешка да не напишем lifetime анотацията.</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="4c57f10ba9573eb28198bf67d30d12e7c2c70820">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">get_str</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span> {
    <span class="tshl-comment">// ...</span>
}

<span class="tshl-keyword">fn</span> <span class="tshl-function">longest</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">x</span>: <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span>, <span class="tshl-variable_parameter">y</span>: <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span> {
    <span class="tshl-comment">// ...</span>
}</code></pre>
                    </div>
                    <div class="rustc-container">
                    <pre><div class="rustc hljs"><span style="font-weight:bold;color:rgb(255,85,85)">error[E0106]</span><span style="font-weight:bold">: missing lifetime specifier</span>
 <span style="font-weight:bold;color:rgb(85,85,255)">--&gt; </span>src/bin/main_4c57f10ba9573eb28198bf67d30d12e7c2c70820.rs:1:17
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">1</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>fn get_str() -&gt; &amp;str {
  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>                <span style="font-weight:bold;color:rgb(255,85,85)">^</span> <span style="font-weight:bold;color:rgb(255,85,85)">expected named lifetime parameter</span>
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
  <span style="font-weight:bold;color:rgb(85,85,255)">= </span><span style="font-weight:bold">help</span>: this function's return type contains a borrowed value, but there is no value for it to be borrowed from
<span style="font-weight:bold;color:rgb(85,187,187)">help</span>: consider using the `'static` lifetime
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">1</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>fn get_str() -&gt; <span style="color:rgb(85,187,85)">&amp;'static </span>str {
  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>                <span style="color:rgb(85,187,85)">~~~~~~~~</span>

<span style="font-weight:bold;color:rgb(255,85,85)">error[E0106]</span><span style="font-weight:bold">: missing lifetime specifier</span>
 <span style="font-weight:bold;color:rgb(85,85,255)">--&gt; </span>src/bin/main_4c57f10ba9573eb28198bf67d30d12e7c2c70820.rs:6:33
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">6</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>fn longest(x: &amp;str, y: &amp;str) -&gt; &amp;str {
  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>              <span style="font-weight:bold;color:rgb(85,85,255)">----</span>     <span style="font-weight:bold;color:rgb(85,85,255)">----</span>     <span style="font-weight:bold;color:rgb(255,85,85)">^</span> <span style="font-weight:bold;color:rgb(255,85,85)">expected named lifetime parameter</span>
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
  <span style="font-weight:bold;color:rgb(85,85,255)">= </span><span style="font-weight:bold">help</span>: this function's return type contains a borrowed value, but the signature does not say whether it is borrowed from `x` or `y`
<span style="font-weight:bold;color:rgb(85,187,187)">help</span>: consider introducing a named lifetime parameter
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">6</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>fn longest<span style="color:rgb(85,187,85)">&lt;'a&gt;</span>(x: &amp;<span style="color:rgb(85,187,85)">'a </span>str, y: &amp;<span style="color:rgb(85,187,85)">'a </span>str) -&gt; &amp;<span style="color:rgb(85,187,85)">'a </span>str {
  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>          <span style="color:rgb(85,187,85)">++++</span>     <span style="color:rgb(85,187,85)">++</span>          <span style="color:rgb(85,187,85)">++</span>          <span style="color:rgb(85,187,85)">++</span>

<span style="font-weight:bold">For more information about this error, try `rustc --explain E0106`.</span>
<span style="font-weight:bold;color:rgb(255,85,85)">error</span><span style="font-weight:bold">:</span> could not compile `rust` due to 2 previous errors</div></pre>
                </div>
                </div>
                
<pre class="rustc-source" data-sha="4c57f10ba9573eb28198bf67d30d12e7c2c70820">fn get_str() -> &str {
    // ...
unimplemented!()
}

fn longest(x: &str, y: &str) -> &str {
    // ...
unimplemented!()
}
fn main() {}</pre>
</div><div class="slide">
<h1 id="lifetimes">Lifetimes</h1>
<h3 id="обобщение">Обобщение</h3>
</div><div class="slide subslide">
<h1 id="lifetimes">Lifetimes</h1>
<h3 id="обобщение">Обобщение</h3>
<ul>
<li>всички референции имат lifetime параметър (<code>&amp;'a X</code>)</li>
</ul>
</div><div class="slide subslide">
<h1 id="lifetimes">Lifetimes</h1>
<h3 id="обобщение">Обобщение</h3>
<ul>
<li>всички референции имат lifetime параметър (<code>&amp;'a X</code>)</li>
<li>показваме че две референции живеят еднакво дълго като им зададем еднакъв lifetime параметър</li>
</ul>
</div><div class="slide subslide">
<h1 id="lifetimes">Lifetimes</h1>
<h3 id="обобщение">Обобщение</h3>
<ul>
<li>всички референции имат lifetime параметър (<code>&amp;'a X</code>)</li>
<li>показваме че две референции живеят еднакво дълго като им зададем еднакъв lifetime параметър</li>
<li>в много случаи lifetime параметрите могат да не се пишат благодарение на lifetime elision</li>
</ul>
</div><div class="slide">
<h1 id="статичен-живот">Статичен живот</h1>
<p><img src="resources/static_life.jpg" alt="Static Life" /></p>
</div><div class="slide">
<h1 id="статичен-живот">Статичен живот</h1>
<p>Специалният lifetime <code>'static</code>.</p>
<p>Оказва че променливата живее за целия живот на програмата.</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="82585d0f4c4c8664af6645b500d2466302320ec3">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">let</span> s: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">static</span> <span class="tshl-type_builtin">str</span> = <span class="tshl-string">&quot;I have a static lifetime.&quot;</span><span class="tshl-punctuation_delimiter">;</span></code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="82585d0f4c4c8664af6645b500d2466302320ec3">fn main() {
let s: &'static str = "I have a static lifetime.";
}</pre>
</div><div class="slide">
<h1 id="референции-в-структури">Референции в структури</h1>
<p><img src="resources/brick_wall.jpg" alt="" /></p>
</div><div class="slide">
<h1 id="референции-в-структури">Референции в структури</h1>
<p>Нека имаме структура, която връща думите от текст.</p>

                <div class="code-block">
                    
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">struct</span> <span class="tshl-type">Words</span> {
    text: ??,
}

<span class="tshl-keyword">impl</span> <span class="tshl-type">Words</span> {
    <span class="tshl-keyword">fn</span> <span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">text</span>: <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Words</span> {
        <span class="tshl-function_macro">todo</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
    }

    <span class="tshl-keyword">fn</span> <span class="tshl-function">next_word</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span><span class="tshl-keyword">mut</span> <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Option</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">&gt;</span> {
        <span class="tshl-function_macro">todo</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
    }
}</code></pre>
                    </div>
                    
                </div>
                
</div><div class="slide subslide">
<h1 id="референции-в-структури">Референции в структури</h1>
<p>Нека имаме структура, която връща думите от текст.</p>

                <div class="code-block">
                    
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">struct</span> <span class="tshl-type">Words</span> {
    text: ??,
}

<span class="tshl-keyword">impl</span> <span class="tshl-type">Words</span> {
    <span class="tshl-keyword">fn</span> <span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">text</span>: <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Words</span> {
        <span class="tshl-function_macro">todo</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
    }

    <span class="tshl-keyword">fn</span> <span class="tshl-function">next_word</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span><span class="tshl-keyword">mut</span> <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Option</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">&gt;</span> {
        <span class="tshl-function_macro">todo</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
    }
}</code></pre>
                    </div>
                    
                </div>
                
<ul>
<li>какъв да е типа на полето <code>text</code>?</li>
</ul>
</div><div class="slide subslide">
<h1 id="референции-в-структури">Референции в структури</h1>
<p>Нека имаме структура, която връща думите от текст.</p>

                <div class="code-block">
                    
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">struct</span> <span class="tshl-type">Words</span> {
    text: ??,
}

<span class="tshl-keyword">impl</span> <span class="tshl-type">Words</span> {
    <span class="tshl-keyword">fn</span> <span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">text</span>: <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Words</span> {
        <span class="tshl-function_macro">todo</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
    }

    <span class="tshl-keyword">fn</span> <span class="tshl-function">next_word</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span><span class="tshl-keyword">mut</span> <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Option</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">&gt;</span> {
        <span class="tshl-function_macro">todo</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
    }
}</code></pre>
                    </div>
                    
                </div>
                
<ul>
<li>какъв да е типа на полето <code>text</code>?</li>
<li>може да е тип който държи стойност, като <code>String</code>, но тогава ще имаме излишно копиране</li>
</ul>
</div><div class="slide subslide">
<h1 id="референции-в-структури">Референции в структури</h1>
<p>Нека имаме структура, която връща думите от текст.</p>

                <div class="code-block">
                    
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">struct</span> <span class="tshl-type">Words</span> {
    text: ??,
}

<span class="tshl-keyword">impl</span> <span class="tshl-type">Words</span> {
    <span class="tshl-keyword">fn</span> <span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">text</span>: <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Words</span> {
        <span class="tshl-function_macro">todo</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
    }

    <span class="tshl-keyword">fn</span> <span class="tshl-function">next_word</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span><span class="tshl-keyword">mut</span> <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Option</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">&gt;</span> {
        <span class="tshl-function_macro">todo</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
    }
}</code></pre>
                    </div>
                    
                </div>
                
<ul>
<li>какъв да е типа на полето <code>text</code>?</li>
<li>може да е тип който държи стойност, като <code>String</code>, но тогава ще имаме излишно копиране</li>
<li>може да пробваме да е референция</li>
</ul>
</div><div class="slide">
<h1 id="референции-в-структури">Референции в структури</h1>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="afa8baa99e3366a4216f568a70ccdbcb9c7c3207">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">struct</span> <span class="tshl-type">Words</span> {
    <span class="tshl-property">text</span>: <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span>,
}</code></pre>
                    </div>
                    <div class="rustc-container">
                    <pre><div class="rustc hljs"><span style="font-weight:bold;color:rgb(255,85,85)">error[E0106]</span><span style="font-weight:bold">: missing lifetime specifier</span>
 <span style="font-weight:bold;color:rgb(85,85,255)">--&gt; </span>src/bin/main_afa8baa99e3366a4216f568a70ccdbcb9c7c3207.rs:2:11
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">2</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>    text: &amp;str,
  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>          <span style="font-weight:bold;color:rgb(255,85,85)">^</span> <span style="font-weight:bold;color:rgb(255,85,85)">expected named lifetime parameter</span>
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,187,187)">help</span>: consider introducing a named lifetime parameter
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">1</span> <span style="color:rgb(85,187,85)">~ </span>struct Words<span style="color:rgb(85,187,85)">&lt;'a&gt;</span> {
<span style="font-weight:bold;color:rgb(85,85,255)">2</span> <span style="color:rgb(85,187,85)">~ </span>    text: &amp;<span style="color:rgb(85,187,85)">'a </span>str,
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>

<span style="font-weight:bold">For more information about this error, try `rustc --explain E0106`.</span>
<span style="font-weight:bold;color:rgb(255,85,85)">error</span><span style="font-weight:bold">:</span> could not compile `rust` due to previous error</div></pre>
                </div>
                </div>
                
<pre class="rustc-source" data-sha="afa8baa99e3366a4216f568a70ccdbcb9c7c3207">struct Words {
    text: &str,
}
fn main() {}</pre>
</div><div class="slide">
<h1 id="референции-в-структури">Референции в структури</h1>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="3fcdce6a4278d26b225b9c1e6fad4a33f518404a">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">struct</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-property">text</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span>,
}</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="3fcdce6a4278d26b225b9c1e6fad4a33f518404a">struct Words<'a> {
    text: &'a str,
}
fn main() {}</pre>
</div><div class="slide">
<h1 id="референции-в-структури">Референции в структури</h1>
<p>Съответно трябва да добавим lifetime параметъра и към <code>impl</code> блока</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="a5b62fe37715ee4256f0d6d875ca25760ffb4fb0">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-attribute">#<span class="tshl-punctuation_bracket">[</span>derive<span class="tshl-punctuation_bracket">(</span><span class="tshl-constructor">Debug</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_bracket">]</span></span>
<span class="tshl-keyword">struct</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-property">text</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span>,
}

<span class="tshl-keyword">impl</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-keyword">fn</span> <span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">text</span>: <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Words</span> {
        <span class="tshl-type">Words</span> { text }
    }
}</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="a5b62fe37715ee4256f0d6d875ca25760ffb4fb0">#[derive(Debug)]
struct Words<'a> {
    text: &'a str,
}

impl<'a> Words<'a> {
    fn new(text: &str) -> Words {
        Words { text }
    }
}
fn main() {}</pre>
</div><div class="slide">
<h1 id="референции-в-структури">Референции в структури</h1>
<p>Животът на структурата е ограничен до това колко живее обектът, от който сме взели референция</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="aa317f3f83cd6d7a524e2ee169b021f4b5fb68be">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">let</span> t1 = <span class="tshl-type">Words</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;a b c&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>                <span class="tshl-comment">// Words&lt;&#39;static&gt;</span>

{
    <span class="tshl-keyword">let</span> s = <span class="tshl-type">String</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">from</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;мой таен низ&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>   <span class="tshl-comment">// ---+- &#39;a</span>
    <span class="tshl-type">Words</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span>s<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">as_str</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>                 <span class="tshl-comment">//    |- Words&lt;&#39;a&gt;</span>
}<span class="tshl-punctuation_delimiter">;</span> <span class="tshl-comment">// &lt;-------------------------------------------+</span></code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="aa317f3f83cd6d7a524e2ee169b021f4b5fb68be">#[derive(Debug)]
struct Words<'a> {
text: &'a str,
}
impl<'a> Words<'a> {
fn new(text: &str) -> Words {
Words { text }
}
}
fn main() {
let t1 = Words::new("a b c");                // Words<'static>

{
    let s = String::from("мой таен низ");   // ---+- 'a
    Words::new(s.as_str());                 //    |- Words<'a>
}; // <-------------------------------------------+
}</pre>
</div><div class="slide">
<h1 id="lifetime-elision-в-impl-блок">Lifetime elision в impl блок</h1>
<p>Как се попълват пропуснатите lifetimes за функцията <code>new</code>?</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="dfa659a656e44a4a2833fcc1bd43e4e7fbaebf98">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">impl</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-keyword">fn</span> <span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">text</span>: <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Words</span> {
        <span class="tshl-type">Words</span> { text }
    }
}</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="dfa659a656e44a4a2833fcc1bd43e4e7fbaebf98">struct Words<'a> {
text: &'a str,
}
impl<'a> Words<'a> {
    fn new(text: &str) -> Words {
        Words { text }
    }
}
fn main() {}</pre>
</div><div class="slide">
<h1 id="lifetime-elision-в-impl-блок">Lifetime elision в impl блок</h1>
<p>Expanded:</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="0bf578ade3cdd35df9f379b05d12d1dc7628c5c6">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">impl</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-keyword">fn</span> <span class="tshl-function">new</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">b</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">text</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">b</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">b</span><span class="tshl-punctuation_bracket">&gt;</span> {
        <span class="tshl-type">Words</span> { text }
    }
}</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="0bf578ade3cdd35df9f379b05d12d1dc7628c5c6">struct Words<'a> {
text: &'a str,
}
impl<'a> Words<'a> {
    fn new<'b>(text: &'b str) -> Words<'b> {
        Words { text }
    }
}
fn main() {}</pre>
</div><div class="slide subslide">
<h1 id="lifetime-elision-в-impl-блок">Lifetime elision в impl блок</h1>
<p>Expanded:</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="0bf578ade3cdd35df9f379b05d12d1dc7628c5c6">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">impl</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-keyword">fn</span> <span class="tshl-function">new</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">b</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">text</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">b</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">b</span><span class="tshl-punctuation_bracket">&gt;</span> {
        <span class="tshl-type">Words</span> { text }
    }
}</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="0bf578ade3cdd35df9f379b05d12d1dc7628c5c6">struct Words<'a> {
text: &'a str,
}
impl<'a> Words<'a> {
    fn new<'b>(text: &'b str) -> Words<'b> {
        Words { text }
    }
}
fn main() {}</pre>
<ul>
<li>aлгоритъмът не взима под внимание lifetime-а <code>'a</code></li>
</ul>
</div><div class="slide subslide">
<h1 id="lifetime-elision-в-impl-блок">Lifetime elision в impl блок</h1>
<p>Expanded:</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="0bf578ade3cdd35df9f379b05d12d1dc7628c5c6">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">impl</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-keyword">fn</span> <span class="tshl-function">new</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">b</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">text</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">b</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">b</span><span class="tshl-punctuation_bracket">&gt;</span> {
        <span class="tshl-type">Words</span> { text }
    }
}</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="0bf578ade3cdd35df9f379b05d12d1dc7628c5c6">struct Words<'a> {
text: &'a str,
}
impl<'a> Words<'a> {
    fn new<'b>(text: &'b str) -> Words<'b> {
        Words { text }
    }
}
fn main() {}</pre>
<ul>
<li>aлгоритъмът не взима под внимание lifetime-а <code>'a</code></li>
<li>пропуснати lifetime параметри на структури се попълват по същия начин като референциите</li>
</ul>
</div><div class="slide">
<h1 id="lifetime-elision-в-impl-блок">Lifetime elision в impl блок</h1>
<p>Ами ако използваме <code>Self</code>?</p>

                <div class="code-block">
                    
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">impl</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-keyword">fn</span> <span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">text</span>: <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Self</span> {
        <span class="tshl-type">Words</span> { text }
    }
}</code></pre>
                    </div>
                    
                </div>
                
</div><div class="slide">
<h1 id="lifetime-elision-в-impl-блок">Lifetime elision в impl блок</h1>
<p>Ами ако използваме <code>Self</code>?</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="20500598e5171c82492ec4a5e7146083406968cd">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">impl</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-keyword">fn</span> <span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">text</span>: <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Self</span> {
        <span class="tshl-type">Words</span> { text }
    }
}</code></pre>
                    </div>
                    <div class="rustc-container">
                    <pre><div class="rustc hljs"><span style="font-weight:bold;color:rgb(255,85,85)">error[E0621]</span><span style="font-weight:bold">: explicit lifetime required in the type of `text`</span>
 <span style="font-weight:bold;color:rgb(85,85,255)">--&gt; </span>src/bin/main_20500598e5171c82492ec4a5e7146083406968cd.rs:6:9
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">5</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>    fn new(text: &amp;str) -&gt; Self {
  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>                 <span style="font-weight:bold;color:rgb(85,85,255)">----</span> <span style="font-weight:bold;color:rgb(85,85,255)">help: add explicit lifetime `'a` to the type of `text`: `&amp;'a str`</span>
<span style="font-weight:bold;color:rgb(85,85,255)">6</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>        Words { text }
  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>        <span style="font-weight:bold;color:rgb(255,85,85)">^^^^^^^^^^^^^^</span> <span style="font-weight:bold;color:rgb(255,85,85)">lifetime `'a` required</span>

<span style="font-weight:bold">For more information about this error, try `rustc --explain E0621`.</span>
<span style="font-weight:bold;color:rgb(255,85,85)">error</span><span style="font-weight:bold">:</span> could not compile `rust` due to previous error</div></pre>
                </div>
                </div>
                
<pre class="rustc-source" data-sha="20500598e5171c82492ec4a5e7146083406968cd">struct Words<'a> {
text: &'a str,
}
impl<'a> Words<'a> {
    fn new(text: &str) -> Self {
        Words { text }
    }
}
fn main() {}</pre>
</div><div class="slide">
<h1 id="lifetime-elision-в-impl-блок">Lifetime elision в impl блок</h1>
<p>В случая <code>Self</code> означава <code>Words&lt;'a&gt;</code>:</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="392932f4ba7aa505606ed5e92a3e6a8c158cca2a">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">impl</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-keyword">fn</span> <span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">text</span>: <span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
        <span class="tshl-type">Words</span> { text }
    }
}</code></pre>
                    </div>
                    <div class="rustc-container">
                    <pre><div class="rustc hljs"><span style="font-weight:bold;color:rgb(255,85,85)">error[E0621]</span><span style="font-weight:bold">: explicit lifetime required in the type of `text`</span>
 <span style="font-weight:bold;color:rgb(85,85,255)">--&gt; </span>src/bin/main_392932f4ba7aa505606ed5e92a3e6a8c158cca2a.rs:6:9
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">5</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>    fn new(text: &amp;str) -&gt; Words&lt;'a&gt; {
  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>                 <span style="font-weight:bold;color:rgb(85,85,255)">----</span> <span style="font-weight:bold;color:rgb(85,85,255)">help: add explicit lifetime `'a` to the type of `text`: `&amp;'a str`</span>
<span style="font-weight:bold;color:rgb(85,85,255)">6</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>        Words { text }
  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>        <span style="font-weight:bold;color:rgb(255,85,85)">^^^^^^^^^^^^^^</span> <span style="font-weight:bold;color:rgb(255,85,85)">lifetime `'a` required</span>

<span style="font-weight:bold">For more information about this error, try `rustc --explain E0621`.</span>
<span style="font-weight:bold;color:rgb(255,85,85)">error</span><span style="font-weight:bold">:</span> could not compile `rust` due to previous error</div></pre>
                </div>
                </div>
                
<pre class="rustc-source" data-sha="392932f4ba7aa505606ed5e92a3e6a8c158cca2a">struct Words<'a> {
text: &'a str,
}
impl<'a> Words<'a> {
    fn new(text: &str) -> Words<'a> {
        Words { text }
    }
}
fn main() {}</pre>
</div><div class="slide">
<h1 id="lifetime-elision-в-impl-блок">Lifetime elision в impl блок</h1>
<p>Expanded:</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="154710e0a8f26410179dbda3cef5acb4d7942703">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">impl</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-keyword">fn</span> <span class="tshl-function">new</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">b</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">text</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">b</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
        <span class="tshl-type">Words</span> { text }
    }
}</code></pre>
                    </div>
                    <div class="rustc-container">
                    <pre><div class="rustc hljs"><span style="font-weight:bold;color:rgb(255,85,85)">error[E0495]</span><span style="font-weight:bold">: cannot infer an appropriate lifetime for lifetime parameter `'a` due to conflicting requirements</span>
 <span style="font-weight:bold;color:rgb(85,85,255)">--&gt; </span>src/bin/main_154710e0a8f26410179dbda3cef5acb4d7942703.rs:6:9
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">6</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>        Words { text }
  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>        <span style="font-weight:bold;color:rgb(255,85,85)">^^^^^</span>
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,187,85)">note</span>: first, the lifetime cannot outlive the lifetime `'b` as defined on the method body at 5:12...
 <span style="font-weight:bold;color:rgb(85,85,255)">--&gt; </span>src/bin/main_154710e0a8f26410179dbda3cef5acb4d7942703.rs:5:12
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">5</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>    fn new&lt;'b&gt;(text: &amp;'b str) -&gt; Words&lt;'a&gt; {
  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>           <span style="font-weight:bold;color:rgb(85,187,85)">^^</span>
<span style="font-weight:bold;color:rgb(85,187,85)">note</span>: ...so that reference does not outlive borrowed content
 <span style="font-weight:bold;color:rgb(85,85,255)">--&gt; </span>src/bin/main_154710e0a8f26410179dbda3cef5acb4d7942703.rs:6:17
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">6</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>        Words { text }
  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>                <span style="font-weight:bold;color:rgb(85,187,85)">^^^^</span>
<span style="font-weight:bold;color:rgb(85,187,85)">note</span>: but, the lifetime must be valid for the lifetime `'a` as defined on the impl at 4:6...
 <span style="font-weight:bold;color:rgb(85,85,255)">--&gt; </span>src/bin/main_154710e0a8f26410179dbda3cef5acb4d7942703.rs:4:6
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">4</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>impl&lt;'a&gt; Words&lt;'a&gt; {
  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>     <span style="font-weight:bold;color:rgb(85,187,85)">^^</span>
<span style="font-weight:bold;color:rgb(85,187,85)">note</span>: ...so that the expression is assignable
 <span style="font-weight:bold;color:rgb(85,85,255)">--&gt; </span>src/bin/main_154710e0a8f26410179dbda3cef5acb4d7942703.rs:6:9
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">6</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>        Words { text }
  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>        <span style="font-weight:bold;color:rgb(85,187,85)">^^^^^^^^^^^^^^</span>
  <span style="font-weight:bold;color:rgb(85,85,255)">= </span><span style="font-weight:bold">note</span>: expected `Words&lt;<span style="font-weight:bold">'a</span>&gt;`
             found `Words&lt;<span style="font-weight:bold">'_</span>&gt;`

<span style="font-weight:bold">For more information about this error, try `rustc --explain E0495`.</span>
<span style="font-weight:bold;color:rgb(255,85,85)">error</span><span style="font-weight:bold">:</span> could not compile `rust` due to previous error</div></pre>
                </div>
                </div>
                
<pre class="rustc-source" data-sha="154710e0a8f26410179dbda3cef5acb4d7942703">struct Words<'a> {
text: &'a str,
}
impl<'a> Words<'a> {
    fn new<'b>(text: &'b str) -> Words<'a> {
        Words { text }
    }
}
fn main() {}</pre>
</div><div class="slide">
<h1 id="lifetime-elision-в-impl-блок">Lifetime elision в impl блок</h1>
<p>Ако искаме да използваме <code>Self</code>, правилния вариант е:</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="854bcbdfc5bfbcf892721ecd6b51ae6fbd2934f3">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">impl</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-keyword">fn</span> <span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">text</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Self</span> {
        <span class="tshl-type">Words</span> { text }
    }
}</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="854bcbdfc5bfbcf892721ecd6b51ae6fbd2934f3">struct Words<'a> {
text: &'a str,
}
impl<'a> Words<'a> {
    fn new(text: &'a str) -> Self {
        Words { text }
    }
}
fn main() {}</pre>
</div><div class="slide">
<h1 id="имплементация-на-next_word-метода">Имплементация на <code>next_word</code> метода</h1>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="b4909be26901077120bd07f52d5c1c17662437a8">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-attribute">#<span class="tshl-punctuation_bracket">[</span>derive<span class="tshl-punctuation_bracket">(</span><span class="tshl-constructor">Debug</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_bracket">]</span></span>
<span class="tshl-keyword">struct</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-property">text</span>: <span class="tshl-type">Option</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">&gt;</span>,
}

<span class="tshl-keyword">impl</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-keyword">fn</span> <span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">text</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Self</span> {
        <span class="tshl-type">Words</span> { <span class="tshl-property">text</span>: <span class="tshl-constructor">Some</span><span class="tshl-punctuation_bracket">(</span>text<span class="tshl-punctuation_bracket">)</span> }
    }

    <span class="tshl-keyword">fn</span> <span class="tshl-function">next_word</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span><span class="tshl-keyword">mut</span> <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Option</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">&gt;</span> {
        <span class="tshl-function_macro">todo</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
    }
}</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="b4909be26901077120bd07f52d5c1c17662437a8">#[derive(Debug)]
struct Words<'a> {
    text: Option<&'a str>,
}

impl<'a> Words<'a> {
    fn new(text: &'a str) -> Self {
        Words { text: Some(text) }
    }

    fn next_word(&mut self) -> Option<&str> {
        todo!()
    }
}
fn main() {}</pre>
</div><div class="slide">
<h1 id="имплементация-на-next_word-метода">Имплементация на <code>next_word</code> метода</h1>
<h3 id="стъпка-по-стъпка">Стъпка по стъпка</h3>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="ae3985dfec370d85ddb05d6d7e70b1c44d99cfa4">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-attribute">#<span class="tshl-punctuation_bracket">[</span>derive<span class="tshl-punctuation_bracket">(</span><span class="tshl-constructor">Debug</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_bracket">]</span></span>
<span class="tshl-keyword">struct</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-property">text</span>: <span class="tshl-type">Option</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">&gt;</span>,
}

<span class="tshl-keyword">impl</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-keyword">fn</span> <span class="tshl-function">next_word</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span><span class="tshl-keyword">mut</span> <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Option</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">&gt;</span> {
        <span class="tshl-keyword">match</span> <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_delimiter">.</span><span class="tshl-property">text</span> {
            <span class="tshl-constructor">Some</span><span class="tshl-punctuation_bracket">(</span>text<span class="tshl-punctuation_bracket">)</span> =&gt; <span class="tshl-function_macro">todo</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>,
            <span class="tshl-constructor">None</span> =&gt; <span class="tshl-constructor">None</span>,
        }
    }
}</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="ae3985dfec370d85ddb05d6d7e70b1c44d99cfa4">#[derive(Debug)]
struct Words<'a> {
    text: Option<&'a str>,
}

impl<'a> Words<'a> {
    fn next_word(&mut self) -> Option<&str> {
        match self.text {
            Some(text) => todo!(),
            None => None,
        }
    }
}
fn main() {}</pre>
</div><div class="slide">
<h1 id="имплементация-на-next_word-метода">Имплементация на <code>next_word</code> метода</h1>
<h3 id="стъпка-по-стъпка">Стъпка по стъпка</h3>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="293ed4b7e52491817057c664640db1c51e5545a6">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-attribute">#<span class="tshl-punctuation_bracket">[</span>derive<span class="tshl-punctuation_bracket">(</span><span class="tshl-constructor">Debug</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_bracket">]</span></span>
<span class="tshl-keyword">struct</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-property">text</span>: <span class="tshl-type">Option</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">&gt;</span>,
}

<span class="tshl-keyword">impl</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-keyword">fn</span> <span class="tshl-function">next_word</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span><span class="tshl-keyword">mut</span> <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Option</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">&gt;</span> {
        <span class="tshl-keyword">match</span> <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_delimiter">.</span><span class="tshl-property">text</span> {
            <span class="tshl-constructor">Some</span><span class="tshl-punctuation_bracket">(</span>text<span class="tshl-punctuation_bracket">)</span> =&gt; {
                <span class="tshl-keyword">let</span> iter = text<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">splitn</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-constant_builtin">2</span>, char<span class="tshl-punctuation_delimiter">::</span>is_whitespace<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>

                <span class="tshl-function_macro">todo</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
            }
            <span class="tshl-constructor">None</span> =&gt; <span class="tshl-constructor">None</span>,
        }
    }
}</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="293ed4b7e52491817057c664640db1c51e5545a6">#[derive(Debug)]
struct Words<'a> {
    text: Option<&'a str>,
}

impl<'a> Words<'a> {
    fn next_word(&mut self) -> Option<&str> {
        match self.text {
            Some(text) => {
                let iter = text.splitn(2, char::is_whitespace);

                todo!()
            }
            None => None,
        }
    }
}
fn main() {}</pre>
</div><div class="slide">
<h1 id="имплементация-на-next_word-метода">Имплементация на <code>next_word</code> метода</h1>
<h3 id="стъпка-по-стъпка">Стъпка по стъпка</h3>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="14b97060eb3c8fc0764dfe132f306c8ede9cee52">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-attribute">#<span class="tshl-punctuation_bracket">[</span>derive<span class="tshl-punctuation_bracket">(</span><span class="tshl-constructor">Debug</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_bracket">]</span></span>
<span class="tshl-keyword">struct</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-property">text</span>: <span class="tshl-type">Option</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">&gt;</span>,
}

<span class="tshl-keyword">impl</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-keyword">fn</span> <span class="tshl-function">next_word</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span><span class="tshl-keyword">mut</span> <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Option</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">&gt;</span> {
        <span class="tshl-keyword">match</span> <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_delimiter">.</span><span class="tshl-property">text</span> {
            <span class="tshl-constructor">Some</span><span class="tshl-punctuation_bracket">(</span>text<span class="tshl-punctuation_bracket">)</span> =&gt; {
                <span class="tshl-keyword">let</span> iter = text<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">splitn</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-constant_builtin">2</span>, char<span class="tshl-punctuation_delimiter">::</span>is_whitespace<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>

                <span class="tshl-keyword">match</span> <span class="tshl-punctuation_bracket">(</span>iter<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">next</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>, iter<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">next</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_bracket">)</span> {
                    <span class="tshl-punctuation_bracket">(</span><span class="tshl-constructor">Some</span><span class="tshl-punctuation_bracket">(</span>word<span class="tshl-punctuation_bracket">)</span>, rest<span class="tshl-punctuation_bracket">)</span> =&gt; {
                        <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_delimiter">.</span><span class="tshl-property">text</span> = rest<span class="tshl-punctuation_delimiter">;</span>
                        <span class="tshl-constructor">Some</span><span class="tshl-punctuation_bracket">(</span>word<span class="tshl-punctuation_bracket">)</span>
                    },
                    _ =&gt; <span class="tshl-function_macro">unreachable</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
                }
            }
            <span class="tshl-constructor">None</span> =&gt; <span class="tshl-constructor">None</span>,
        }
    }
}</code></pre>
                    </div>
                    <div class="rustc-container">
                    <pre><div class="rustc hljs"><span style="font-weight:bold;color:rgb(255,85,85)">error[E0596]</span><span style="font-weight:bold">: cannot borrow `iter` as mutable, as it is not declared as mutable</span>
  <span style="font-weight:bold;color:rgb(85,85,255)">--&gt; </span>src/bin/main_14b97060eb3c8fc0764dfe132f306c8ede9cee52.rs:12:24
   <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">10</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>                let iter = text.splitn(2, char::is_whitespace);
   <span style="font-weight:bold;color:rgb(85,85,255)">| </span>                    <span style="font-weight:bold;color:rgb(85,85,255)">----</span> <span style="font-weight:bold;color:rgb(85,85,255)">help: consider changing this to be mutable: `mut iter`</span>
<span style="font-weight:bold;color:rgb(85,85,255)">11</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>
<span style="font-weight:bold;color:rgb(85,85,255)">12</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>                match (iter.next(), iter.next()) {
   <span style="font-weight:bold;color:rgb(85,85,255)">| </span>                       <span style="font-weight:bold;color:rgb(255,85,85)">^^^^</span> <span style="font-weight:bold;color:rgb(255,85,85)">cannot borrow as mutable</span>

<span style="font-weight:bold;color:rgb(255,85,85)">error[E0596]</span><span style="font-weight:bold">: cannot borrow `iter` as mutable, as it is not declared as mutable</span>
  <span style="font-weight:bold;color:rgb(85,85,255)">--&gt; </span>src/bin/main_14b97060eb3c8fc0764dfe132f306c8ede9cee52.rs:12:37
   <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">10</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>                let iter = text.splitn(2, char::is_whitespace);
   <span style="font-weight:bold;color:rgb(85,85,255)">| </span>                    <span style="font-weight:bold;color:rgb(85,85,255)">----</span> <span style="font-weight:bold;color:rgb(85,85,255)">help: consider changing this to be mutable: `mut iter`</span>
<span style="font-weight:bold;color:rgb(85,85,255)">11</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>
<span style="font-weight:bold;color:rgb(85,85,255)">12</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>                match (iter.next(), iter.next()) {
   <span style="font-weight:bold;color:rgb(85,85,255)">| </span>                                    <span style="font-weight:bold;color:rgb(255,85,85)">^^^^</span> <span style="font-weight:bold;color:rgb(255,85,85)">cannot borrow as mutable</span>

<span style="font-weight:bold">For more information about this error, try `rustc --explain E0596`.</span>
<span style="font-weight:bold;color:rgb(255,85,85)">error</span><span style="font-weight:bold">:</span> could not compile `rust` due to 2 previous errors</div></pre>
                </div>
                </div>
                
<pre class="rustc-source" data-sha="14b97060eb3c8fc0764dfe132f306c8ede9cee52">#[derive(Debug)]
struct Words<'a> {
    text: Option<&'a str>,
}

impl<'a> Words<'a> {
    fn next_word(&mut self) -> Option<&str> {
        match self.text {
            Some(text) => {
                let iter = text.splitn(2, char::is_whitespace);

                match (iter.next(), iter.next()) {
                    (Some(word), rest) => {
                        self.text = rest;
                        Some(word)
                    },
                    _ => unreachable!()
                }
            }
            None => None,
        }
    }
}
fn main() {}</pre>
</div><div class="slide">
<h1 id="имплементация-на-next_word-метода">Имплементация на <code>next_word</code> метода</h1>
<h3 id="разкрасяване">Разкрасяване</h3>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="8c0e95b292c19aecedb3ba5cb90cc5408760a6b3">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-attribute">#<span class="tshl-punctuation_bracket">[</span>derive<span class="tshl-punctuation_bracket">(</span><span class="tshl-constructor">Debug</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_bracket">]</span></span>
<span class="tshl-keyword">struct</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-property">text</span>: <span class="tshl-type">Option</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">&gt;</span>,
}

<span class="tshl-keyword">impl</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-keyword">fn</span> <span class="tshl-function">next_word</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span><span class="tshl-keyword">mut</span> <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Option</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&amp;</span><span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">&gt;</span> {
        <span class="tshl-keyword">let</span> text = <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_delimiter">.</span><span class="tshl-property">text</span>?<span class="tshl-punctuation_delimiter">;</span>
        <span class="tshl-keyword">let</span> <span class="tshl-keyword">mut</span> iter = text<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">splitn</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-constant_builtin">2</span>, char<span class="tshl-punctuation_delimiter">::</span>is_whitespace<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>

        <span class="tshl-keyword">match</span> <span class="tshl-punctuation_bracket">(</span>iter<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">next</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>, iter<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">next</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_bracket">)</span> {
            <span class="tshl-punctuation_bracket">(</span><span class="tshl-constructor">Some</span><span class="tshl-punctuation_bracket">(</span>word<span class="tshl-punctuation_bracket">)</span>, rest<span class="tshl-punctuation_bracket">)</span> =&gt; {
                <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_delimiter">.</span><span class="tshl-property">text</span> = rest<span class="tshl-punctuation_delimiter">;</span>
                <span class="tshl-constructor">Some</span><span class="tshl-punctuation_bracket">(</span>word<span class="tshl-punctuation_bracket">)</span>
            },
            _ =&gt; <span class="tshl-function_macro">unreachable</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
        }
    }
}</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="8c0e95b292c19aecedb3ba5cb90cc5408760a6b3">#[derive(Debug)]
struct Words<'a> {
    text: Option<&'a str>,
}

impl<'a> Words<'a> {
    fn next_word(&mut self) -> Option<&str> {
        let text = self.text?;
        let mut iter = text.splitn(2, char::is_whitespace);

        match (iter.next(), iter.next()) {
            (Some(word), rest) => {
                self.text = rest;
                Some(word)
            },
            _ => unreachable!()
        }
    }
}
fn main() {}</pre>
</div><div class="slide">
<h1 id="имплементация-на-next_word-метода">Имплементация на <code>next_word</code> метода</h1>
<h3 id="тестване">Тестване</h3>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="6fcd5d5d5d517c3e7d9d1ec699c99b7df4fa7624">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">main</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> {
    <span class="tshl-keyword">let</span> <span class="tshl-keyword">mut</span> words = <span class="tshl-type">Words</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;hello world&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
    <span class="tshl-function_macro">println</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;{:?}&quot;</span>, words.next_word<span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
    <span class="tshl-function_macro">println</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;{:?}&quot;</span>, words.next_word<span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
    <span class="tshl-function_macro">println</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;{:?}&quot;</span>, words.next_word<span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
}</code></pre>
                    </div>
                    <div class="rustc-container">
                    <pre><div class="rustc hljs">Some("hello")
Some("world")
None</div></pre>
                </div>
                </div>
                
<pre class="rustc-source" data-sha="6fcd5d5d5d517c3e7d9d1ec699c99b7df4fa7624">#[derive(Debug)]
struct Words<'a> {
text: Option<&'a str>,
}

impl<'a> Words<'a> {
fn new(text: &'a str) -> Self {
Words { text: Some(text) }
}
fn next_word(&mut self) -> Option<&str> {
let text = self.text?;
let mut iter = text.splitn(2, char::is_whitespace);

match (iter.next(), iter.next()) {
(Some(word), rest) => {
self.text = rest;
Some(word)
},
_ => unreachable!()
}
}
}
fn main() {
    let mut words = Words::new("hello world");
    println!("{:?}", words.next_word());
    println!("{:?}", words.next_word());
    println!("{:?}", words.next_word());
}</pre>
</div><div class="slide">
<h1 id="имплементация-на-next_word-метода">Имплементация на <code>next_word</code> метода</h1>
<h3 id="а-може-и-с-unit-test">А може и с unit test</h3>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="b6ba50477a14c654cf8aa3a37c66fbfe31e0b1c0">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-attribute">#<span class="tshl-punctuation_bracket">[</span>cfg<span class="tshl-punctuation_bracket">(</span>test<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_bracket">]</span></span>
<span class="tshl-keyword">mod</span> tests{
    <span class="tshl-keyword">use</span> <span class="tshl-keyword">super</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-operator">*</span><span class="tshl-punctuation_delimiter">;</span>

    <span class="tshl-attribute">#<span class="tshl-punctuation_bracket">[</span>test<span class="tshl-punctuation_bracket">]</span></span>
    <span class="tshl-keyword">fn</span> <span class="tshl-function">words_basic</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> {
        <span class="tshl-keyword">let</span> <span class="tshl-keyword">mut</span> words = <span class="tshl-type">Words</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;hello world&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
        <span class="tshl-function_macro">assert_eq</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span>words.next_word<span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>, <span class="tshl-constructor">Some</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;hello&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
        <span class="tshl-function_macro">assert_eq</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span>words.next_word<span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>, <span class="tshl-constructor">Some</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;world&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
        <span class="tshl-function_macro">assert_eq</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span>words.next_word<span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>, <span class="tshl-constructor">None</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
    }
}</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="b6ba50477a14c654cf8aa3a37c66fbfe31e0b1c0">#[derive(Debug)]
struct Words<'a> {
text: Option<&'a str>,
}

impl<'a> Words<'a> {
fn next_word(&mut self) -> Option<&str> {
let text = self.text?;
let mut iter = text.splitn(2, char::is_whitespace);

match (iter.next(), iter.next()) {
(Some(word), rest) => {
self.text = rest;
Some(word)
},
_ => unreachable!()
}
}
}
#[cfg(test)]
mod tests{
    use super::*;

    #[test]
    fn words_basic() {
        let mut words = Words::new("hello world");
        assert_eq!(words.next_word(), Some("hello"));
        assert_eq!(words.next_word(), Some("world"));
        assert_eq!(words.next_word(), None);
    }
}
fn main() {}</pre>
</div><div class="slide">
<h1 id="имплементация-на-next_word-метода">Имплементация на <code>next_word</code> метода</h1>
<h3 id="lifetimes">Lifetimes</h3>
<p>Всичко работи, но дали имаме правилните lifetimes?</p>

                <div class="code-block">
                    
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">hello</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">static</span> <span class="tshl-type_builtin">str</span> {
    <span class="tshl-keyword">let</span> <span class="tshl-keyword">mut</span> words = <span class="tshl-type">Words</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;hello world&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
    words<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">next_word</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">unwrap</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
}</code></pre>
                    </div>
                    
                </div>
                
</div><div class="slide">
<h1 id="имплементация-на-next_word-метода">Имплементация на <code>next_word</code> метода</h1>
<h3 id="lifetimes">Lifetimes</h3>
<p>Всичко работи, но дали имаме правилните lifetimes?</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="d6797e8cf18756bda4efddc6ca761db598f5c6e8">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">hello</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">static</span> <span class="tshl-type_builtin">str</span> {
    <span class="tshl-keyword">let</span> <span class="tshl-keyword">mut</span> words = <span class="tshl-type">Words</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;hello world&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
    words<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">next_word</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">unwrap</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
}</code></pre>
                    </div>
                    <div class="rustc-container">
                    <pre><div class="rustc hljs"><span style="font-weight:bold;color:rgb(255,85,85)">error[E0515]</span><span style="font-weight:bold">: cannot return value referencing local variable `words`</span>
  <span style="font-weight:bold;color:rgb(85,85,255)">--&gt; </span>src/bin/main_d6797e8cf18756bda4efddc6ca761db598f5c6e8.rs:23:5
   <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">23</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>    words.next_word().unwrap()
   <span style="font-weight:bold;color:rgb(85,85,255)">| </span>    <span style="font-weight:bold;color:rgb(85,85,255)">-----</span><span style="font-weight:bold;color:rgb(255,85,85)">^^^^^^^^^^^^^^^^^^^^^</span>
   <span style="font-weight:bold;color:rgb(85,85,255)">| </span>    <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
   <span style="font-weight:bold;color:rgb(85,85,255)">| </span>    <span style="font-weight:bold;color:rgb(255,85,85)">returns a value referencing data owned by the current function</span>
   <span style="font-weight:bold;color:rgb(85,85,255)">| </span>    <span style="font-weight:bold;color:rgb(85,85,255)">`words` is borrowed here</span>

<span style="font-weight:bold">For more information about this error, try `rustc --explain E0515`.</span>
<span style="font-weight:bold;color:rgb(255,85,85)">error</span><span style="font-weight:bold">:</span> could not compile `rust` due to previous error</div></pre>
                </div>
                </div>
                
<pre class="rustc-source" data-sha="d6797e8cf18756bda4efddc6ca761db598f5c6e8">#[derive(Debug)]
struct Words<'a> {
text: Option<&'a str>,
}
impl<'a> Words<'a> {
fn new(text: &'a str) -> Self {
Words { text: Some(text) }
}
fn next_word(&mut self) -> Option<&str> {
let text = self.text?;
let mut iter = text.splitn(2, char::is_whitespace);
match (iter.next(), iter.next()) {
(Some(word), rest) => {
self.text = rest;
Some(word)
},
_ => unreachable!()
}
}
}
fn hello() -> &'static str {
    let mut words = Words::new("hello world");
    words.next_word().unwrap()
}
fn main() {}</pre>
</div><div class="slide">
<h1 id="имплементация-на-next_word-метода">Имплементация на <code>next_word</code> метода</h1>
<h3 id="lifetimes">Lifetimes</h3>
<p>Това става, защото резултата от <code>next_word</code> има lifetime колкото <code>self</code> (<code>'b</code>).</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="56c8026618be076710ee72368b8d7456482f9d98">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">impl</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-keyword">fn</span> <span class="tshl-function">next_word</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">b</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">b</span> <span class="tshl-keyword">mut</span> <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Option</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">b</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">&gt;</span> {
        <span class="tshl-keyword">let</span> text = <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_delimiter">.</span><span class="tshl-property">text</span>?<span class="tshl-punctuation_delimiter">;</span>
        <span class="tshl-keyword">let</span> <span class="tshl-keyword">mut</span> iter = text<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">splitn</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-constant_builtin">2</span>, char<span class="tshl-punctuation_delimiter">::</span>is_whitespace<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>

        <span class="tshl-keyword">match</span> <span class="tshl-punctuation_bracket">(</span>iter<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">next</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>, iter<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">next</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_bracket">)</span> {
            <span class="tshl-punctuation_bracket">(</span><span class="tshl-constructor">Some</span><span class="tshl-punctuation_bracket">(</span>word<span class="tshl-punctuation_bracket">)</span>, rest<span class="tshl-punctuation_bracket">)</span> =&gt; {
                <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_delimiter">.</span><span class="tshl-property">text</span> = rest<span class="tshl-punctuation_delimiter">;</span>
                <span class="tshl-constructor">Some</span><span class="tshl-punctuation_bracket">(</span>word<span class="tshl-punctuation_bracket">)</span>
            },
            _ =&gt; <span class="tshl-function_macro">unreachable</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
        }
    }
}</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="56c8026618be076710ee72368b8d7456482f9d98">#[derive(Debug)]
struct Words<'a> {
text: Option<&'a str>,
}
impl<'a> Words<'a> {
    fn next_word<'b>(&'b mut self) -> Option<&'b str> {
        let text = self.text?;
        let mut iter = text.splitn(2, char::is_whitespace);

        match (iter.next(), iter.next()) {
            (Some(word), rest) => {
                self.text = rest;
                Some(word)
            },
            _ => unreachable!()
        }
    }
}
fn main() {}</pre>
</div><div class="slide">
<h1 id="имплементация-на-next_word-метода">Имплементация на <code>next_word</code> метода</h1>
<h3 id="lifetimes">Lifetimes</h3>
<p>Вместо това може да върнем резултат с lifetime-а на оригиналния низ в полето <code>text</code> (<code>'a</code>).</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="ac6844b1ca12339802acfeadb8fa3180437064ad">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">impl</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-keyword">fn</span> <span class="tshl-function">next_word</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span><span class="tshl-keyword">mut</span> <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Option</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">&gt;</span> {
        <span class="tshl-comment">// използваме lifetime &#39;a тук  ^^</span>

        <span class="tshl-keyword">let</span> text = <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_delimiter">.</span><span class="tshl-property">text</span>?<span class="tshl-punctuation_delimiter">;</span>
        <span class="tshl-keyword">let</span> <span class="tshl-keyword">mut</span> iter = text<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">splitn</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-constant_builtin">2</span>, char<span class="tshl-punctuation_delimiter">::</span>is_whitespace<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>

        <span class="tshl-keyword">match</span> <span class="tshl-punctuation_bracket">(</span>iter<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">next</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>, iter<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">next</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_bracket">)</span> {
            <span class="tshl-punctuation_bracket">(</span><span class="tshl-constructor">Some</span><span class="tshl-punctuation_bracket">(</span>word<span class="tshl-punctuation_bracket">)</span>, rest<span class="tshl-punctuation_bracket">)</span> =&gt; {
                <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_delimiter">.</span><span class="tshl-property">text</span> = rest<span class="tshl-punctuation_delimiter">;</span>
                <span class="tshl-constructor">Some</span><span class="tshl-punctuation_bracket">(</span>word<span class="tshl-punctuation_bracket">)</span>
            },
            _ =&gt; <span class="tshl-function_macro">unreachable</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
        }
    }
}

<span class="tshl-keyword">fn</span> <span class="tshl-function">hello</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">static</span> <span class="tshl-type_builtin">str</span> {
    <span class="tshl-keyword">let</span> <span class="tshl-keyword">mut</span> words = <span class="tshl-type">Words</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;hello world&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
    words<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">next_word</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">unwrap</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
}

<span class="tshl-keyword">fn</span> <span class="tshl-function">main</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> {
    <span class="tshl-function_macro">println</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;{}&quot;</span>, hello<span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
}</code></pre>
                    </div>
                    <div class="rustc-container">
                    <pre><div class="rustc hljs">hello</div></pre>
                </div>
                </div>
                
<pre class="rustc-source" data-sha="ac6844b1ca12339802acfeadb8fa3180437064ad">#[derive(Debug)]
struct Words<'a> {
text: Option<&'a str>,
}
impl<'a> Words<'a> {
fn new(text: &'a str) -> Self {
Words { text: Some(text) }
}
}
impl<'a> Words<'a> {
    fn next_word(&mut self) -> Option<&'a str> {
        // използваме lifetime 'a тук  ^^

        let text = self.text?;
        let mut iter = text.splitn(2, char::is_whitespace);

        match (iter.next(), iter.next()) {
            (Some(word), rest) => {
                self.text = rest;
                Some(word)
            },
            _ => unreachable!()
        }
    }
}

fn hello() -> &'static str {
    let mut words = Words::new("hello world");
    words.next_word().unwrap()
}

fn main() {
    println!("{}", hello());
}</pre>
</div><div class="slide">
<h1 id="имплементация-на-next_word-метода">Имплементация на <code>next_word</code> метода</h1>
<h3 id="финален-код">Финален код</h3>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="44b95a51eedd8765342e636fd20cecaa8490e324">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-attribute">#<span class="tshl-punctuation_bracket">[</span>derive<span class="tshl-punctuation_bracket">(</span><span class="tshl-constructor">Debug</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_bracket">]</span></span>
<span class="tshl-keyword">struct</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-property">text</span>: <span class="tshl-type">Option</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">&gt;</span>,
}

<span class="tshl-keyword">impl</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> <span class="tshl-type">Words</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-keyword">fn</span> <span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">text</span>: <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Self</span> {
        <span class="tshl-type">Words</span> { <span class="tshl-property">text</span>: <span class="tshl-constructor">Some</span><span class="tshl-punctuation_bracket">(</span>text<span class="tshl-punctuation_bracket">)</span> }
    }

    <span class="tshl-keyword">fn</span> <span class="tshl-function">next_word</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span><span class="tshl-keyword">mut</span> <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Option</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type_builtin">str</span><span class="tshl-punctuation_bracket">&gt;</span> {
        <span class="tshl-keyword">let</span> text = <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_delimiter">.</span><span class="tshl-property">text</span>?<span class="tshl-punctuation_delimiter">;</span>
        <span class="tshl-keyword">let</span> <span class="tshl-keyword">mut</span> iter = text<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">splitn</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-constant_builtin">2</span>, char<span class="tshl-punctuation_delimiter">::</span>is_whitespace<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>

        <span class="tshl-keyword">match</span> <span class="tshl-punctuation_bracket">(</span>iter<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">next</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>, iter<span class="tshl-punctuation_delimiter">.</span><span class="tshl-function_method">next</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_bracket">)</span> {
            <span class="tshl-punctuation_bracket">(</span><span class="tshl-constructor">Some</span><span class="tshl-punctuation_bracket">(</span>word<span class="tshl-punctuation_bracket">)</span>, rest<span class="tshl-punctuation_bracket">)</span> =&gt; {
                <span class="tshl-variable_builtin">self</span><span class="tshl-punctuation_delimiter">.</span><span class="tshl-property">text</span> = rest<span class="tshl-punctuation_delimiter">;</span>
                <span class="tshl-constructor">Some</span><span class="tshl-punctuation_bracket">(</span>word<span class="tshl-punctuation_bracket">)</span>
            },
            _ =&gt; <span class="tshl-function_macro">unreachable</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span>
        }
    }
}</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="44b95a51eedd8765342e636fd20cecaa8490e324">#[derive(Debug)]
struct Words<'a> {
    text: Option<&'a str>,
}

impl<'a> Words<'a> {
    fn new(text: &'a str) -> Self {
        Words { text: Some(text) }
    }

    fn next_word(&mut self) -> Option<&'a str> {
        let text = self.text?;
        let mut iter = text.splitn(2, char::is_whitespace);

        match (iter.next(), iter.next()) {
            (Some(word), rest) => {
                self.text = rest;
                Some(word)
            },
            _ => unreachable!()
        }
    }
}

fn main() {}</pre>
</div><div class="slide">
<h1 id="lifetimes--generics">Lifetimes &amp; generics</h1>
</div><div class="slide">
<h1 id="lifetimes--generics">Lifetimes &amp; generics</h1>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="83027eda1c45d95c1b6a4ac6889b0e76a7e37fc4">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">trait</span> <span class="tshl-type">MyTrait</span> {}
<span class="tshl-keyword">impl</span> <span class="tshl-type">MyTrait</span> <span class="tshl-keyword">for</span> <span class="tshl-type">String</span> {}

<span class="tshl-keyword">struct</span> <span class="tshl-type">Wrapper</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-type">T</span>: <span class="tshl-type">MyTrait</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-type">T</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>

<span class="tshl-keyword">fn</span> <span class="tshl-function">save_for_later</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-type">T</span>: <span class="tshl-type">MyTrait</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">something</span>: <span class="tshl-type">T</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Wrapper</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-type">T</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-constructor">Wrapper</span><span class="tshl-punctuation_bracket">(</span>something<span class="tshl-punctuation_bracket">)</span>
}

<span class="tshl-keyword">fn</span> <span class="tshl-function">main</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> {
    <span class="tshl-keyword">let</span> saved = {
        <span class="tshl-keyword">let</span> s = <span class="tshl-type">String</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">from</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;yippie&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
        <span class="tshl-function">save_for_later</span><span class="tshl-punctuation_bracket">(</span>s<span class="tshl-punctuation_bracket">)</span>
    }<span class="tshl-punctuation_delimiter">;</span>

    <span class="tshl-keyword">let</span> inner = <span class="tshl-operator">&amp;</span>saved<span class="tshl-punctuation_delimiter">.</span><span class="tshl-constant_builtin">0</span><span class="tshl-punctuation_delimiter">;</span>
    <span class="tshl-function_macro">println</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;{}&quot;</span>, inner<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
}</code></pre>
                    </div>
                    <div class="rustc-container">
                    <pre><div class="rustc hljs">yippie</div></pre>
                </div>
                </div>
                
<pre class="rustc-source" data-sha="83027eda1c45d95c1b6a4ac6889b0e76a7e37fc4">trait MyTrait {}
impl MyTrait for String {}

struct Wrapper<T: MyTrait>(T);

fn save_for_later<T: MyTrait>(something: T) -> Wrapper<T> {
    Wrapper(something)
}

fn main() {
    let saved = {
        let s = String::from("yippie");
        save_for_later(s)
    };

    let inner = &saved.0;
    println!("{}", inner);
}</pre>
</div><div class="slide">
<h1 id="lifetimes--generics">Lifetimes &amp; generics</h1>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="944046f574413164dd1bf391cfeecc1e2abeb8d7">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">trait</span> <span class="tshl-type">MyTrait</span> {}
<span class="tshl-keyword">impl</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> <span class="tshl-type">MyTrait</span> <span class="tshl-keyword">for</span> <span class="tshl-operator">&amp;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span> <span class="tshl-type">String</span> {}

<span class="tshl-keyword">struct</span> <span class="tshl-type">Wrapper</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-type">T</span>: <span class="tshl-type">MyTrait</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-type">T</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>

<span class="tshl-keyword">fn</span> <span class="tshl-function">save_for_later</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-type">T</span>: <span class="tshl-type">MyTrait</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">something</span>: <span class="tshl-type">T</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Wrapper</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-type">T</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-constructor">Wrapper</span><span class="tshl-punctuation_bracket">(</span>something<span class="tshl-punctuation_bracket">)</span>
}

<span class="tshl-keyword">fn</span> <span class="tshl-function">main</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> {
    <span class="tshl-keyword">let</span> saved = {
        <span class="tshl-keyword">let</span> s = <span class="tshl-type">String</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">from</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;yippie&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
        <span class="tshl-function">save_for_later</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span>s<span class="tshl-punctuation_bracket">)</span>
    }<span class="tshl-punctuation_delimiter">;</span>

    <span class="tshl-keyword">let</span> inner = <span class="tshl-operator">&amp;</span>saved<span class="tshl-punctuation_delimiter">.</span><span class="tshl-constant_builtin">0</span><span class="tshl-punctuation_delimiter">;</span>
    <span class="tshl-function_macro">println</span><span class="tshl-function_macro">!</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;{}&quot;</span>, inner<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
}</code></pre>
                    </div>
                    <div class="rustc-container">
                    <pre><div class="rustc hljs"><span style="font-weight:bold;color:rgb(255,85,85)">error[E0597]</span><span style="font-weight:bold">: `s` does not live long enough</span>
  <span style="font-weight:bold;color:rgb(85,85,255)">--&gt; </span>src/bin/main_944046f574413164dd1bf391cfeecc1e2abeb8d7.rs:13:24
   <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">11</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>    let saved = {
   <span style="font-weight:bold;color:rgb(85,85,255)">| </span>        <span style="font-weight:bold;color:rgb(85,85,255)">-----</span> <span style="font-weight:bold;color:rgb(85,85,255)">borrow later stored here</span>
<span style="font-weight:bold;color:rgb(85,85,255)">12</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>        let s = String::from("yippie");
<span style="font-weight:bold;color:rgb(85,85,255)">13</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>        save_for_later(&amp;s)
   <span style="font-weight:bold;color:rgb(85,85,255)">| </span>                       <span style="font-weight:bold;color:rgb(255,85,85)">^^</span> <span style="font-weight:bold;color:rgb(255,85,85)">borrowed value does not live long enough</span>
<span style="font-weight:bold;color:rgb(85,85,255)">14</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>    };
   <span style="font-weight:bold;color:rgb(85,85,255)">| </span>    <span style="font-weight:bold;color:rgb(85,85,255)">-</span> <span style="font-weight:bold;color:rgb(85,85,255)">`s` dropped here while still borrowed</span>

<span style="font-weight:bold">For more information about this error, try `rustc --explain E0597`.</span>
<span style="font-weight:bold;color:rgb(255,85,85)">error</span><span style="font-weight:bold">:</span> could not compile `rust` due to previous error</div></pre>
                </div>
                </div>
                
<pre class="rustc-source" data-sha="944046f574413164dd1bf391cfeecc1e2abeb8d7">trait MyTrait {}
impl<'a> MyTrait for &'a String {}

struct Wrapper<T: MyTrait>(T);

fn save_for_later<T: MyTrait>(something: T) -> Wrapper<T> {
    Wrapper(something)
}

fn main() {
    let saved = {
        let s = String::from("yippie");
        save_for_later(&s)
    };

    let inner = &saved.0;
    println!("{}", inner);
}</pre>
</div><div class="slide">
<h1 id="lifetimes--generics">Lifetimes &amp; generics</h1>
<ul>
<li>generic тип <code>T</code> може да е референция</li>
</ul>
</div><div class="slide subslide">
<h1 id="lifetimes--generics">Lifetimes &amp; generics</h1>
<ul>
<li>generic тип <code>T</code> може да е референция</li>
<li>тогава той има lifetime, макар че няма lifetime параметър</li>
</ul>
</div><div class="slide subslide">
<h1 id="lifetimes--generics">Lifetimes &amp; generics</h1>
<ul>
<li>generic тип <code>T</code> може да е референция</li>
<li>тогава той има lifetime, макар че няма lifetime параметър</li>
<li>и всеки тип който съдържа <code>T</code> също има lifetime, защото съдържа референция</li>
</ul>
</div><div class="slide">
<h1 id="lifetimes--generics">Lifetimes &amp; generics</h1>
<ul>
<li>generic тип <code>T</code> може да е и тип с ownership</li>
</ul>
</div><div class="slide subslide">
<h1 id="lifetimes--generics">Lifetimes &amp; generics</h1>
<ul>
<li>generic тип <code>T</code> може да е и тип с ownership</li>
<li>в този случай се приема, че <code>T</code> има lifetime <code>'static</code></li>
</ul>
</div><div class="slide">
<h1 id="lifetimes--generics">Lifetimes &amp; generics</h1>
<p>Aко искаме да запазим нещо за дълго можем да използваме ограничение <code>'static</code></p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="3cc370ff648a66fdd263658404e2a5794f56c10a">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">save_for_later</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-type">T</span>: <span class="tshl-type">MyTrait</span> + <span class="tshl-operator">&#39;</span><span class="tshl-label">static</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">something</span>: <span class="tshl-type">T</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Wrapper</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-type">T</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-constructor">Wrapper</span><span class="tshl-punctuation_bracket">(</span>something<span class="tshl-punctuation_bracket">)</span>
}

<span class="tshl-keyword">fn</span> <span class="tshl-function">main</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> {
    <span class="tshl-keyword">let</span> saved = {
        <span class="tshl-keyword">let</span> s = <span class="tshl-type">String</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">from</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;yippie&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
        <span class="tshl-function">save_for_later</span><span class="tshl-punctuation_bracket">(</span>s<span class="tshl-punctuation_bracket">)</span>   <span class="tshl-comment">// OK, T = String =&gt; T: &#39;static</span>
    }<span class="tshl-punctuation_delimiter">;</span>
}</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="3cc370ff648a66fdd263658404e2a5794f56c10a">trait MyTrait {}
impl MyTrait for String {}
impl<'a> MyTrait for &'a String {}
struct Wrapper<T: MyTrait>(T);

fn save_for_later<T: MyTrait + 'static>(something: T) -> Wrapper<T> {
    Wrapper(something)
}

fn main() {
    let saved = {
        let s = String::from("yippie");
        save_for_later(s)   // OK, T = String => T: 'static
    };
}</pre>
</div><div class="slide">
<h1 id="lifetimes--generics">Lifetimes &amp; generics</h1>
<p>Aко искаме да запазим нещо за дълго можем да използваме ограничение <code>'static</code></p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="47863cb4318a5526d1168585843d28102ada988b">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">save_for_later</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-type">T</span>: <span class="tshl-type">MyTrait</span> + <span class="tshl-operator">&#39;</span><span class="tshl-label">static</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">something</span>: <span class="tshl-type">T</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Wrapper</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-type">T</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-constructor">Wrapper</span><span class="tshl-punctuation_bracket">(</span>something<span class="tshl-punctuation_bracket">)</span>
}

<span class="tshl-keyword">fn</span> <span class="tshl-function">main</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> {
    <span class="tshl-keyword">let</span> saved = {
        <span class="tshl-keyword">let</span> s = <span class="tshl-type">String</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">from</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;yippie&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
        <span class="tshl-function">save_for_later</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span>s<span class="tshl-punctuation_bracket">)</span>   <span class="tshl-comment">// Err, T = &amp;&#39;a String =&gt; T: &#39;a</span>
    }<span class="tshl-punctuation_delimiter">;</span>
}</code></pre>
                    </div>
                    <div class="rustc-container">
                    <pre><div class="rustc hljs"><span style="font-weight:bold;color:rgb(255,85,85)">error[E0597]</span><span style="font-weight:bold">: `s` does not live long enough</span>
  <span style="font-weight:bold;color:rgb(85,85,255)">--&gt; </span>src/bin/main_47863cb4318a5526d1168585843d28102ada988b.rs:13:24
   <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">13</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>        save_for_later(&amp;s)   // Err, T = &amp;'a String =&gt; T: 'a
   <span style="font-weight:bold;color:rgb(85,85,255)">| </span>        <span style="font-weight:bold;color:rgb(85,85,255)">---------------</span><span style="font-weight:bold;color:rgb(255,85,85)">^^</span><span style="font-weight:bold;color:rgb(85,85,255)">-</span>
   <span style="font-weight:bold;color:rgb(85,85,255)">| </span>        <span style="font-weight:bold;color:rgb(85,85,255)">|</span>              <span style="font-weight:bold;color:rgb(255,85,85)">|</span>
   <span style="font-weight:bold;color:rgb(85,85,255)">| </span>        <span style="font-weight:bold;color:rgb(85,85,255)">|</span>              <span style="font-weight:bold;color:rgb(255,85,85)">borrowed value does not live long enough</span>
   <span style="font-weight:bold;color:rgb(85,85,255)">| </span>        <span style="font-weight:bold;color:rgb(85,85,255)">argument requires that `s` is borrowed for `'static`</span>
<span style="font-weight:bold;color:rgb(85,85,255)">14</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>    };
   <span style="font-weight:bold;color:rgb(85,85,255)">| </span>    <span style="font-weight:bold;color:rgb(85,85,255)">-</span> <span style="font-weight:bold;color:rgb(85,85,255)">`s` dropped here while still borrowed</span>

<span style="font-weight:bold">For more information about this error, try `rustc --explain E0597`.</span>
<span style="font-weight:bold;color:rgb(255,85,85)">error</span><span style="font-weight:bold">:</span> could not compile `rust` due to previous error</div></pre>
                </div>
                </div>
                
<pre class="rustc-source" data-sha="47863cb4318a5526d1168585843d28102ada988b">trait MyTrait {}
impl MyTrait for String {}
impl<'a> MyTrait for &'a String {}
struct Wrapper<T: MyTrait>(T);

fn save_for_later<T: MyTrait + 'static>(something: T) -> Wrapper<T> {
    Wrapper(something)
}

fn main() {
    let saved = {
        let s = String::from("yippie");
        save_for_later(&s)   // Err, T = &'a String => T: 'a
    };
}</pre>
</div><div class="slide">
<h1 id="lifetimes-generics--dynamic-dispatch">Lifetimes, generics &amp; dynamic dispatch</h1>
<p>Имаме подобен проблем ако искаме да ползваме dynamic dispatch</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="b51c04a1a4b92edadf0fafcba2db31fdf9574870">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">save_for_later</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-type">T</span>: <span class="tshl-type">MyTrait</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">something</span>: <span class="tshl-type">T</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Box</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-keyword">dyn</span> <span class="tshl-type">MyTrait</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-type">Box</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span>something<span class="tshl-punctuation_bracket">)</span>
}

<span class="tshl-keyword">fn</span> <span class="tshl-function">main</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> {
    <span class="tshl-comment">// ...</span>
}</code></pre>
                    </div>
                    <div class="rustc-container">
                    <pre><div class="rustc hljs"><span style="font-weight:bold;color:rgb(255,85,85)">error[E0310]</span><span style="font-weight:bold">: the parameter type `T` may not live long enough</span>
 <span style="font-weight:bold;color:rgb(85,85,255)">--&gt; </span>src/bin/main_b51c04a1a4b92edadf0fafcba2db31fdf9574870.rs:6:5
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">5</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>fn save_for_later&lt;T: MyTrait&gt;(something: T) -&gt; Box&lt;dyn MyTrait&gt; {
  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>                  <span style="font-weight:bold;color:rgb(85,85,255)">--</span> <span style="font-weight:bold;color:rgb(85,85,255)">help: consider adding an explicit lifetime bound...: `T: 'static +`</span>
<span style="font-weight:bold;color:rgb(85,85,255)">6</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>    Box::new(something)
  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>    <span style="font-weight:bold;color:rgb(255,85,85)">^^^^^^^^^^^^^^^^^^^</span> <span style="font-weight:bold;color:rgb(255,85,85)">...so that the type `T` will meet its required lifetime bounds</span>

<span style="font-weight:bold">For more information about this error, try `rustc --explain E0310`.</span>
<span style="font-weight:bold;color:rgb(255,85,85)">error</span><span style="font-weight:bold">:</span> could not compile `rust` due to previous error</div></pre>
                </div>
                </div>
                
<pre class="rustc-source" data-sha="b51c04a1a4b92edadf0fafcba2db31fdf9574870">trait MyTrait {}
impl MyTrait for String {}
impl<'a> MyTrait for &'a String {}

fn save_for_later<T: MyTrait>(something: T) -> Box<dyn MyTrait> {
    Box::new(something)
}

fn main() {
    // ...
}</pre>
</div><div class="slide">
<h1 id="lifetimes-generics--dynamic-dispatch">Lifetimes, generics &amp; dynamic dispatch</h1>
<p>По подразбиране <code>dyn Trait</code> има ограничение <code>'static</code></p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="0c50acb87194fec8e19b1308b6c107246b96e4f2">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">save_for_later</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-type">T</span>: <span class="tshl-type">MyTrait</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">something</span>: <span class="tshl-type">T</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Box</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-keyword">dyn</span> <span class="tshl-type">MyTrait</span> + <span class="tshl-operator">&#39;</span><span class="tshl-label">static</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-type">Box</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span>something<span class="tshl-punctuation_bracket">)</span>
}

<span class="tshl-keyword">fn</span> <span class="tshl-function">main</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> {
    <span class="tshl-comment">// ...</span>
}</code></pre>
                    </div>
                    <div class="rustc-container">
                    <pre><div class="rustc hljs"><span style="font-weight:bold;color:rgb(255,85,85)">error[E0310]</span><span style="font-weight:bold">: the parameter type `T` may not live long enough</span>
 <span style="font-weight:bold;color:rgb(85,85,255)">--&gt; </span>src/bin/main_0c50acb87194fec8e19b1308b6c107246b96e4f2.rs:6:5
  <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">5</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>fn save_for_later&lt;T: MyTrait&gt;(something: T) -&gt; Box&lt;dyn MyTrait + 'static&gt; {
  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>                  <span style="font-weight:bold;color:rgb(85,85,255)">--</span> <span style="font-weight:bold;color:rgb(85,85,255)">help: consider adding an explicit lifetime bound...: `T: 'static +`</span>
<span style="font-weight:bold;color:rgb(85,85,255)">6</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>    Box::new(something)
  <span style="font-weight:bold;color:rgb(85,85,255)">| </span>    <span style="font-weight:bold;color:rgb(255,85,85)">^^^^^^^^^^^^^^^^^^^</span> <span style="font-weight:bold;color:rgb(255,85,85)">...so that the type `T` will meet its required lifetime bounds</span>

<span style="font-weight:bold">For more information about this error, try `rustc --explain E0310`.</span>
<span style="font-weight:bold;color:rgb(255,85,85)">error</span><span style="font-weight:bold">:</span> could not compile `rust` due to previous error</div></pre>
                </div>
                </div>
                
<pre class="rustc-source" data-sha="0c50acb87194fec8e19b1308b6c107246b96e4f2">trait MyTrait {}
impl MyTrait for String {}
impl<'a> MyTrait for &'a String {}

fn save_for_later<T: MyTrait>(something: T) -> Box<dyn MyTrait + 'static> {
    Box::new(something)
}

fn main() {
    // ...
}</pre>
</div><div class="slide">
<h1 id="lifetimes-generics--dynamic-dispatch">Lifetimes, generics &amp; dynamic dispatch</h1>
<p>Можем да ограничим функцията да работи само със "static" типове</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="06553ec39ce7d27721309b60d0e9d0fbe5038201">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">save_for_later</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-type">T</span>: <span class="tshl-type">MyTrait</span> + <span class="tshl-operator">&#39;</span><span class="tshl-label">static</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">something</span>: <span class="tshl-type">T</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Box</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-keyword">dyn</span> <span class="tshl-type">MyTrait</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-type">Box</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span>something<span class="tshl-punctuation_bracket">)</span>
}

<span class="tshl-keyword">fn</span> <span class="tshl-function">main</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> {
    <span class="tshl-comment">// ...</span>
}</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="06553ec39ce7d27721309b60d0e9d0fbe5038201">trait MyTrait {}
impl MyTrait for String {}
impl<'a> MyTrait for &'a String {}

fn save_for_later<T: MyTrait + 'static>(something: T) -> Box<dyn MyTrait> {
    Box::new(something)
}

fn main() {
    // ...
}</pre>
</div><div class="slide">
<h1 id="lifetimes-generics--dynamic-dispatch">Lifetimes, generics &amp; dynamic dispatch</h1>
<p>Можем да сложим и различно ограничение</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="7f865032922fcf2345621de4adea3637e2c6e211">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">save_for_later</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span>, <span class="tshl-type">T</span>: <span class="tshl-type">MyTrait</span> + <span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">something</span>: <span class="tshl-type">T</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Box</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-keyword">dyn</span> <span class="tshl-type">MyTrait</span> + <span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-type">Box</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span>something<span class="tshl-punctuation_bracket">)</span>
}

<span class="tshl-keyword">fn</span> <span class="tshl-function">main</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> {
    <span class="tshl-keyword">let</span> s = <span class="tshl-type">String</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">from</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;yippie&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
    <span class="tshl-keyword">let</span> saved = <span class="tshl-function">save_for_later</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span>s<span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
}</code></pre>
                    </div>
                    
                </div>
                
<pre class="rustc-source" data-sha="7f865032922fcf2345621de4adea3637e2c6e211">trait MyTrait {}
impl MyTrait for String {}
impl<'a> MyTrait for &'a String {}

fn save_for_later<'a, T: MyTrait + 'a>(something: T) -> Box<dyn MyTrait + 'a> {
    Box::new(something)
}

fn main() {
    let s = String::from("yippie");
    let saved = save_for_later(&s);
}</pre>
</div><div class="slide">
<h1 id="lifetimes-generics--dynamic-dispatch">Lifetimes, generics &amp; dynamic dispatch</h1>
<p>Разбира се, в този случай резултатът от функцията има ограничен lifetime</p>

                <div class="code-block">
                    <button type="button" class="btn rustc-copy" data-sha="aeb777d71a9775f9cdeb01967c3423fe31409068">Copy</button>
                    <div class="code-container">
                        <div class="line-numbers hljs"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</div>
                        <pre><code class="rustrust language-rust hljs"><span class="tshl-keyword">fn</span> <span class="tshl-function">save_for_later</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-operator">&#39;</span><span class="tshl-label">a</span>, <span class="tshl-type">T</span>: <span class="tshl-type">MyTrait</span> + <span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-variable_parameter">something</span>: <span class="tshl-type">T</span><span class="tshl-punctuation_bracket">)</span> -&gt; <span class="tshl-type">Box</span><span class="tshl-punctuation_bracket">&lt;</span><span class="tshl-keyword">dyn</span> <span class="tshl-type">MyTrait</span> + <span class="tshl-operator">&#39;</span><span class="tshl-label">a</span><span class="tshl-punctuation_bracket">&gt;</span> {
    <span class="tshl-type">Box</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">new</span><span class="tshl-punctuation_bracket">(</span>something<span class="tshl-punctuation_bracket">)</span>
}

<span class="tshl-keyword">fn</span> <span class="tshl-function">main</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-punctuation_bracket">)</span> {
    <span class="tshl-keyword">let</span> saved = {
        <span class="tshl-keyword">let</span> s = <span class="tshl-type">String</span><span class="tshl-punctuation_delimiter">::</span><span class="tshl-function">from</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-string">&quot;yippie&quot;</span><span class="tshl-punctuation_bracket">)</span><span class="tshl-punctuation_delimiter">;</span>
        <span class="tshl-function">save_for_later</span><span class="tshl-punctuation_bracket">(</span><span class="tshl-operator">&amp;</span>s<span class="tshl-punctuation_bracket">)</span>
    }<span class="tshl-punctuation_delimiter">;</span>
}</code></pre>
                    </div>
                    <div class="rustc-container">
                    <pre><div class="rustc hljs"><span style="font-weight:bold;color:rgb(255,85,85)">error[E0597]</span><span style="font-weight:bold">: `s` does not live long enough</span>
  <span style="font-weight:bold;color:rgb(85,85,255)">--&gt; </span>src/bin/main_aeb777d71a9775f9cdeb01967c3423fe31409068.rs:12:24
   <span style="font-weight:bold;color:rgb(85,85,255)">|</span>
<span style="font-weight:bold;color:rgb(85,85,255)">12</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>        save_for_later(&amp;s)
   <span style="font-weight:bold;color:rgb(85,85,255)">| </span>        <span style="font-weight:bold;color:rgb(85,85,255)">---------------</span><span style="font-weight:bold;color:rgb(255,85,85)">^^</span><span style="font-weight:bold;color:rgb(85,85,255)">-</span>
   <span style="font-weight:bold;color:rgb(85,85,255)">| </span>        <span style="font-weight:bold;color:rgb(85,85,255)">|</span>              <span style="font-weight:bold;color:rgb(255,85,85)">|</span>
   <span style="font-weight:bold;color:rgb(85,85,255)">| </span>        <span style="font-weight:bold;color:rgb(85,85,255)">|</span>              <span style="font-weight:bold;color:rgb(255,85,85)">borrowed value does not live long enough</span>
   <span style="font-weight:bold;color:rgb(85,85,255)">| </span>        <span style="font-weight:bold;color:rgb(85,85,255)">borrow later used here</span>
<span style="font-weight:bold;color:rgb(85,85,255)">13</span> <span style="font-weight:bold;color:rgb(85,85,255)">| </span>    };
   <span style="font-weight:bold;color:rgb(85,85,255)">| </span>    <span style="font-weight:bold;color:rgb(85,85,255)">-</span> <span style="font-weight:bold;color:rgb(85,85,255)">`s` dropped here while still borrowed</span>

<span style="font-weight:bold">For more information about this error, try `rustc --explain E0597`.</span>
<span style="font-weight:bold;color:rgb(255,85,85)">error</span><span style="font-weight:bold">:</span> could not compile `rust` due to previous error</div></pre>
                </div>
                </div>
                
<pre class="rustc-source" data-sha="aeb777d71a9775f9cdeb01967c3423fe31409068">trait MyTrait {}
impl MyTrait for String {}
impl<'a> MyTrait for &'a String {}

fn save_for_later<'a, T: MyTrait + 'a>(something: T) -> Box<dyn MyTrait + 'a> {
    Box::new(something)
}

fn main() {
    let saved = {
        let s = String::from("yippie");
        save_for_later(&s)
    };
}</pre>
</div><div class="slide">
<h1 id="въпроси">Въпроси</h1>
</div>
    </main>
</body>
</html>
